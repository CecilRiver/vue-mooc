{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js!C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\lesson\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\lesson\\list.vue","mtime":1698894932463},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Empty from 'components/empty/empty.vue';\nimport { addCart } from 'api/cart.js';\nimport { ERR_OK } from 'api/config.js';\nexport default {\n  props: {\n    list: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      isShowLike: false,\n      isHide: false,\n      currentFilterIndex: 0,\n      filter: []\n    };\n  },\n  created: function created() {\n    this.filter = [{\n      title: '默认排序',\n      code: ''\n    }, {\n      title: '最新',\n      code: 'time'\n    }, {\n      title: '销量',\n      code: 'persons'\n    }];\n  },\n  methods: {\n    // 筛选项点击事件\n    handleFilterClick: function handleFilterClick(filter, index) {\n      this.currentFilterIndex = index;\n      this.$emit('update:sort', filter.code);\n    },\n    // 加入购物车\n    handleAddCartClick: function handleAddCartClick(item) {\n      var _this = this;\n\n      var params = item;\n      addCart(params).then(function (res) {\n        var code = res.code,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          _this.$confirm('添加购物车成功', '提示', {\n            confirmButtonText: '去购物车结算',\n            cancelButtonText: '再逛逛',\n            type: 'success'\n          }).then(function () {\n            _this.$router.push('/cart');\n          });\n        } else {\n          _this.$message.error(msg);\n        }\n      }).catch(function () {\n        _this.$message.error('接口异常');\n      });\n    },\n    // 课程点击事件\n    handleLessonClick: function handleLessonClick(lesson) {\n      if (lesson.isBuy) {\n        this.$router.push(\"/lesson/\".concat(lesson.id));\n      }\n    }\n  },\n  computed: {\n    // 已收藏课程数量\n    computeLikeLesson: function computeLikeLesson() {\n      return this.list.filter(function (item) {\n        return item.isLike;\n      }).length || 0;\n    }\n  },\n  components: {\n    Empty: Empty\n  },\n  watch: {\n    isHide: function isHide() {\n      this.isShowLike = false;\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,OAAA,KAAA,MAAA,4BAAA;AACA,SAAA,OAAA,QAAA,aAAA;AACA,SAAA,MAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA;AADA,GADA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,kBAAA,EAAA,CAHA;AAIA,MAAA,MAAA,EAAA;AAJA,KAAA;AAMA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AACA,SAAA,MAAA,GAAA,CACA;AAAA,MAAA,KAAA,EAAA,MAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KADA,EAEA;AAAA,MAAA,KAAA,EAAA,IAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAFA,EAGA;AAAA,MAAA,KAAA,EAAA,IAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAHA,CAAA;AAKA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,iBAFA,6BAEA,MAFA,EAEA,KAFA,EAEA;AACA,WAAA,kBAAA,GAAA,KAAA;AACA,WAAA,KAAA,CAAA,aAAA,EAAA,MAAA,CAAA,IAAA;AACA,KALA;AAMA;AACA,IAAA,kBAPA,8BAOA,IAPA,EAOA;AAAA;;AACA,UAAA,MAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAAA,YACA,IADA,GACA,GADA,CACA,IADA;AAAA,YACA,GADA,GACA,GADA,CACA,GADA;;AAEA,YAAA,IAAA,KAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,SAAA,EAAA,IAAA,EAAA;AACA,YAAA,iBAAA,EAAA,QADA;AAEA,YAAA,gBAAA,EAAA,KAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA,EAIA,IAJA,CAIA,YAAA;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,WANA;AAOA,SARA,MAQA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA;AACA;AACA,OAbA,EAaA,KAbA,CAaA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA,OAfA;AAgBA,KAzBA;AA0BA;AACA,IAAA,iBA3BA,6BA2BA,MA3BA,EA2BA;AACA,UAAA,MAAA,CAAA,KAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,mBAAA,MAAA,CAAA,EAAA;AACA;AACA;AA/BA,GAxBA;AAyDA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,iBAFA,+BAEA;AACA,aAAA,KAAA,IAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,MAAA;AAAA,OAAA,EAAA,MAAA,IAAA,CAAA;AACA;AAJA,GAzDA;AA+DA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GA/DA;AAkEA,EAAA,KAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,UAAA,GAAA,KAAA;AACA;AAHA;AAlEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"lesson-list-wrapper ml-center\">\r\n    <!-- 筛选类表 -->\r\n    <div class=\"list-filter\">\r\n      <ul>\r\n        <li\r\n          v-for=\"(filter, index) in filter\"\r\n          :key=\"index\"\r\n          class=\"filter-item\"\r\n          :class=\"{active: currentFilterIndex == index}\"\r\n          @click=\"handleFilterClick(filter,index)\"\r\n        >\r\n          {{ filter.title }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- 课程列表 -->\r\n    <ul v-if=\"list.length\" class=\"lesson-list\">\r\n      <li v-for=\"(item, index) in list\" :key=\"index\" class=\"list-item\" @click=\"handleLessonClick(item)\">\r\n        <div class=\"img-box\">\r\n          <img :src=\"item.img\" alt=\"\">\r\n          <span v-if=\"item.rate\" class=\"rate\">{{ item.rate }}%</span>\r\n          <div class=\"lesson-mask\">\r\n            <div v-if=\"item.teacher\" class=\"teacher-info\">\r\n              <img :src=\"item.teacher.avatar\" alt=\"\">\r\n              <span class=\"name\">{{ item.teacher.name }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"lesson-content\">\r\n          <h2 class=\"title\">\r\n            {{ item.title }}\r\n          </h2>\r\n          <p>\r\n            <span>{{ item.hard.text }}</span>\r\n            <span class=\"number\"><i class=\"iconfont\">&#xe607;</i>{{ item.persons || 0 }}</span>\r\n            <span class=\"comment\">{{ item.comments || 0 }}人评价</span>\r\n          </p>\r\n          <p class=\"desc\">\r\n            {{ item.introduction }}\r\n          </p>\r\n          <p class=\"price\">\r\n            <span v-if=\"item.isDiscount\" class=\"new\">¥{{ item.discountPrice }}</span>\r\n            <span class=\"old\" :class=\"{'is-discount': item.isDiscount}\">¥{{ item.price }}</span>\r\n            <span class=\"price-right\">\r\n              <span v-if=\"!item.isBuy\" class=\"cart\" @click.stop=\"handleAddCartClick(item)\">加入购物车</span>\r\n            </span>\r\n          </p>\r\n          <p v-if=\"item.isDiscount\">\r\n            <span class=\"discount\">限时优惠</span>\r\n          </p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <empty v-else message=\"暂无相关课程数据\"></empty>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Empty from 'components/empty/empty.vue'\r\nimport { addCart } from 'api/cart.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  props: {\r\n    list: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isShowLike: false,\r\n      isHide: false,\r\n      currentFilterIndex: 0,\r\n      filter: []\r\n    }\r\n  },\r\n  created () {\r\n    this.filter = [\r\n      { title: '默认排序', code: '' },\r\n      { title: '最新', code: 'time' },\r\n      { title: '销量', code: 'persons' }\r\n    ]\r\n  },\r\n  methods: {\r\n    // 筛选项点击事件\r\n    handleFilterClick (filter, index) {\r\n      this.currentFilterIndex = index\r\n      this.$emit('update:sort', filter.code)\r\n    },\r\n    // 加入购物车\r\n    handleAddCartClick (item) {\r\n      const params = item\r\n      addCart(params).then(res => {\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.$confirm('添加购物车成功', '提示', {\r\n            confirmButtonText: '去购物车结算',\r\n            cancelButtonText: '再逛逛',\r\n            type: 'success'\r\n          }).then(() => {\r\n            this.$router.push('/cart')\r\n          })\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 课程点击事件\r\n    handleLessonClick (lesson) {\r\n      if (lesson.isBuy) {\r\n        this.$router.push(`/lesson/${lesson.id}`)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 已收藏课程数量\r\n    computeLikeLesson () {\r\n      return this.list.filter(item => item.isLike).length || 0\r\n    }\r\n  },\r\n  components: {\r\n    Empty\r\n  },\r\n  watch: {\r\n    isHide () {\r\n      this.isShowLike = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl';\r\n  @import '~assets/stylus/mixin.styl';\r\n  .lesson-list-wrapper\r\n    .list-filter\r\n      padding: 20px 12px;\r\n      border-top: 1px solid $border-second-color;\r\n      & > ul\r\n        display: inline-block;\r\n      .filter-item\r\n        display: inline-block;\r\n        margin-right: 12px;\r\n        padding: 4px 12px;\r\n        border-radius: 12px;\r\n        line-height: 16px;\r\n        font-size: 12px;\r\n        color: $font-second-color;\r\n        cursor: pointer;\r\n        &.active\r\n          background-color: $font-second-color;\r\n          color: #fff;\r\n    .lesson-list\r\n      .list-item\r\n        display: inline-block;\r\n        vertical-align: top;\r\n        margin-right: 24px;\r\n        margin-bottom: 36px;\r\n        width: 270px;\r\n        cursor: pointer;\r\n        &:hover\r\n          .img-box\r\n            box-shadow: 0 8px 4px 0 rgba(7,17,27,0.1);\r\n          .lesson-content\r\n            .title\r\n              color: $theme-red-color;\r\n        &:nth-child(5n) {\r\n          margin-right: 0;\r\n        }\r\n        .img-box\r\n          position: relative;\r\n          border-radius: 16px;\r\n          img-box(270px, 148px);\r\n          & > img\r\n            border-radius: 16px;\r\n          .rate\r\n            position: absolute;\r\n            right: -8px;\r\n            top: 8px;\r\n            padding: 0 8px;\r\n            border-radius: 12px;\r\n            border: 2px solid #fff;\r\n            line-height: 20px;\r\n            background: linear-gradient(-90deg,#65da98 0,#0cba4d 100%);\r\n            font-size: 12px;\r\n            font-weight: 700;\r\n            color: #fff;\r\n          .lesson-mask\r\n            position: absolute;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            height: 74px;\r\n            background: linear-gradient(-180deg,rgba(7,17,27,0) 0,rgba(7,17,27,.6) 97%);\r\n            border-bottom-left-radius: 16px;\r\n            border-bottom-right-radius: 16px;\r\n            .teacher-info\r\n              position: absolute;\r\n              left: 16px;\r\n              bottom: 16px;\r\n              & > img\r\n                display: inline-block;\r\n                vertical-align: text-bottom;\r\n                margin-right: 12px;\r\n                width: 36px;\r\n                height: 36px;\r\n                background-color: #eee;\r\n                border-radius: 50%;\r\n              .name\r\n                display: inline-block;\r\n                margin-top: -2px;\r\n                font-size: 14px;\r\n                font-weight: 700;\r\n                color: #fff;\r\n        .lesson-content\r\n          padding: 0 8px;\r\n          .title\r\n            margin-top: 16px;\r\n            height: 48px;\r\n            font-size: 16px;\r\n            font-weight: 700;\r\n            line-height: 24px;\r\n            color: $font-first-color;\r\n            word-break: break-all;\r\n            multline-ellipsis(2);\r\n          & > p\r\n            line-height: 20px;\r\n            color: $font-four-color;\r\n            font-size: 12px;\r\n            span\r\n              line-height: 24px;\r\n              cursor: pointer;\r\n            &.desc\r\n              margin-top: 4px;\r\n              height: 42px;\r\n              multline-ellipsis(2);\r\n              &:hover\r\n                color: $font-second-color;\r\n            &.price\r\n              margin-bottom: 4px;\r\n            .number\r\n              margin-left: 10px;\r\n            .comment\r\n              float: right;\r\n            .old\r\n              color: $font-second-color;\r\n              &.is-discount\r\n                margin-left: 8px;\r\n                text-decoration: line-through;\r\n            .new\r\n              color: $font-second-color;\r\n            .price-right\r\n              float: right;\r\n              .cart\r\n                padding-left: 10px;\r\n                &:hover\r\n                  color: $font-second-color;\r\n            .discount\r\n              padding: 4px;\r\n              border-radius: 4px;\r\n              background-color: $theme-red-color;\r\n              opacity: 0.6;\r\n              line-height: 20px;\r\n              color: #fff;\r\n</style>\r\n"],"sourceRoot":"src/pages/lesson"}]}