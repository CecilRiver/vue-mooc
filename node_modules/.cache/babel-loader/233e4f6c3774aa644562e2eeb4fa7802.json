{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js!C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\components\\header\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\components\\header\\login.vue","mtime":1699882095071},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\GitTest\\\\vue-mooc\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getNotReadNotice } from 'api/notice.js';\nimport { ERR_OK } from 'api/config.js';\nimport { mapMutations, mapActions, mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      isDot: false,\n      cartList: [],\n      showMiniCart: false,\n      showUserInfo: false\n    };\n  },\n  mounted: function mounted() {\n    if (this.userInfo[0].userId) {\n      this.isDot = true; //this.getNotReadNoticeData()\n    }\n  },\n  methods: _objectSpread({\n    // 鼠标移出\n    handleCarItemtMouseLeave: function handleCarItemtMouseLeave() {\n      var _this = this;\n\n      this.timer = setTimeout(function () {\n        _this.showMiniCart = false;\n      }, 150);\n    },\n    // 鼠标移入\n    handleCartMouseEnter: function handleCartMouseEnter() {\n      clearTimeout(this.timer);\n    },\n    // 登录点击\n    handleLoginClick: function handleLoginClick() {\n      this.setShowLogin(true);\n      this.setLoginAction('login');\n    },\n    // 注册点击\n    handleRegisterClick: function handleRegisterClick() {\n      this.setShowLogin(true);\n      this.setLoginAction('register');\n    },\n    // 安全退出\n    handleUserLogout: function handleUserLogout() {\n      var _this2 = this;\n\n      this.logout().then(function () {\n        _this2.showUserInfo = false;\n\n        _this2.$router.push('/home');\n      }).catch(function () {\n        _this2.$message.error('退出登录失败');\n      });\n    },\n    // 课程历史点击\n    handleHistoryClick: function handleHistoryClick() {\n      var random = new Date().getTime();\n      this.showUserInfo = false;\n      this.$router.push(\"/lesson/\".concat(random));\n    },\n    // 获取未读消息数据\n    getNotReadNoticeData: function getNotReadNoticeData() {\n      this.isDot = true; // getNotReadNotice().then(res => {\n      //   const { code, data } = res\n      //   if (code === ERR_OK && data === true) {\n      //     this.isDot = true\n      //   } else {\n      //     this.isDot = false\n      //   }\n      // }).catch(() => {\n      //   this.isDot = false\n      // })\n    }\n  }, mapMutations('login', {\n    'setShowLogin': 'SET_SHOW_LOGIN',\n    'setLoginAction': 'SET_LOGIN_ACTION',\n    'setUserInfo': 'SET_USER_INFO'\n  }), mapActions('login', {\n    'logout': 'logout'\n  })),\n  computed: _objectSpread({}, mapGetters(['userInfo'])),\n  components: {\n    MiniCart: function MiniCart() {\n      return import('components/cart/cart.vue');\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA,SAAA,gBAAA,QAAA,eAAA;AACA,SAAA,MAAA,QAAA,eAAA;AACA,SAAA,YAAA,EAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OATA,qBASA;AACA,QAAA,KAAA,QAAA,CAAA,CAAA,EAAA,MAAA,EAAA;AACA,WAAA,KAAA,GAAA,IAAA,CADA,CAEA;AACA;AACA,GAdA;AAeA,EAAA,OAAA;AACA;AACA,IAAA,wBAFA,sCAEA;AAAA;;AACA,WAAA,KAAA,GAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,OAFA,EAEA,GAFA,CAAA;AAGA,KANA;AAOA;AACA,IAAA,oBARA,kCAQA;AACA,MAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA,KAVA;AAWA;AACA,IAAA,gBAZA,8BAYA;AACA,WAAA,YAAA,CAAA,IAAA;AACA,WAAA,cAAA,CAAA,OAAA;AACA,KAfA;AAgBA;AACA,IAAA,mBAjBA,iCAiBA;AACA,WAAA,YAAA,CAAA,IAAA;AACA,WAAA,cAAA,CAAA,UAAA;AACA,KApBA;AAqBA;AACA,IAAA,gBAtBA,8BAsBA;AAAA;;AACA,WAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAHA,EAGA,KAHA,CAGA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA;AACA,OALA;AAMA,KA7BA;AA8BA;AACA,IAAA,kBA/BA,gCA+BA;AACA,UAAA,MAAA,GAAA,IAAA,IAAA,GAAA,OAAA,EAAA;AACA,WAAA,YAAA,GAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,mBAAA,MAAA;AACA,KAnCA;AAoCA;AACA,IAAA,oBArCA,kCAqCA;AACA,WAAA,KAAA,GAAA,IAAA,CADA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjDA,KAmDA,YAAA,CAAA,OAAA,EAAA;AACA,oBAAA,gBADA;AAEA,sBAAA,kBAFA;AAGA,mBAAA;AAHA,GAAA,CAnDA,EAwDA,UAAA,CAAA,OAAA,EAAA;AACA,cAAA;AADA,GAAA,CAxDA,CAfA;AA2EA,EAAA,QAAA,oBAEA,UAAA,CAAA,CAAA,UAAA,CAAA,CAFA,CA3EA;AA+EA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AAAA,aAAA,OAAA,0BAAA,CAAA;AAAA;AADA,GA/EA;AAkFA,EAAA,aAlFA,2BAkFA;AACA,IAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA;AApFA,CAAA","sourcesContent":["<template>\r\n  <ul class=\"login-area\">\r\n    <!-- <li class=\"item invite\">\r\n      <router-link to=\"/\">\r\n        <img src=\"https://www.imooc.com/static/img/index/redPacket.png\" width=\"14\" height=\"16\" alt=\"\">\r\n        <span class=\"login-text\"></span>\r\n      </router-link>\r\n    </li> -->\r\n    <li class=\"item download\">\r\n      <a href=\"javascript:;\">\r\n        <span class=\"login-text\"></span>\r\n      </a>\r\n    </li>\r\n    <li class=\"item cart\" @mouseenter=\"showMiniCart = true\" @mouseleave=\"handleCarItemtMouseLeave\">\r\n      <a href=\"javascript:;\">\r\n        <!-- <i class=\"iconfont\">&#xe63b;</i> -->\r\n        <span class=\"login-text\">消息提醒</span>\r\n        <div class=\"mini-chart-container\" @mouseenter=\"handleCartMouseEnter\" @mouseleave=\"showMiniCart = false\">\r\n          <mini-cart v-if=\"showMiniCart\" :list=\"cartList\" @close=\"showMiniCart=false\" />\r\n        </div>\r\n      </a>\r\n    </li>\r\n    <template v-if=\"userInfo[0] && userInfo[0].userId\">\r\n      <li class=\"item bell\">\r\n        <router-link to=\"/notice\">\r\n          <mooc-badge :max=\"99\" :is-dot=\"isDot\">\r\n            <i class=\"iconfont\">&#xe6eb;</i>\r\n          </mooc-badge>\r\n        </router-link>\r\n      </li>\r\n      <li class=\"item userinfo\" @mouseenter=\"showUserInfo = true\" @mouseleave=\"showUserInfo = false\">\r\n        <div class=\"img-box\">\r\n          <img :src=\"userInfo[0].profilePicture\" alt=\"\">\r\n        </div>\r\n        <div v-show=\"showUserInfo\" class=\"userinfo-wrapper\">\r\n          <div class=\"userinfo-message-wrapper\">\r\n            <img :src=\"userInfo[0].profilePicture\" alt=\"\">\r\n            <div class=\"userinfo-message\">\r\n              <p class=\"name ellipsis\">\r\n                {{ userInfo[0].username }}\r\n              </p>\r\n              <p class=\"number\">\r\n                <span class=\"number-item\" style=\"display: block;\">邮箱: <br><b>{{ userInfo[0].email }}</b></span>\r\n                <span class=\"number-item\" style=\"display: block;\">个性签名: <br><b>{{ userInfo[0].intro }}</b></span>\r\n                <span class=\"number-item\" style=\"display: block;\">上次登录时间: <br><b>{{ userInfo[0].lastLogin.slice(0, 19) }}</b></span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div class=\"fast-nav\" @click.stop=\"showUserInfo = false\">\r\n            <router-link v-if=\"this.userInfo[0].roleId ===2\" to=\"/user/course\">\r\n              <div class=\"fast-nav-item\">\r\n                <i class=\"iconfont\">&#xe60e;</i>\r\n                我的课程\r\n              </div>\r\n            </router-link>\r\n\r\n            <router-link v-else-if=\"this.userInfo[0].roleId === 1\" to =\"/teacher/course\">\r\n              <div class=\"fast-nav-item\">\r\n                <i class=\"iconfont\">&#xe60e;</i>\r\n                我的课程\r\n              </div>\r\n            </router-link>\r\n\r\n            <router-link to=\"/order\">\r\n              <div class=\"fast-nav-item\">\r\n                <i class=\"iconfont\">&#xe611;</i>\r\n                任务中心\r\n              </div>\r\n            </router-link>\r\n            <router-link to=\"/integral\">\r\n              <div class=\"fast-nav-item\">\r\n                <i class=\"iconfont\">&#xe61b;</i>\r\n                个人积分\r\n              </div>\r\n            </router-link>\r\n            <router-link to=\"/user\">\r\n              <div class=\"fast-nav-item\">\r\n                <i class=\"iconfont\">&#xe680;</i>\r\n                个人中心\r\n              </div>\r\n            </router-link>\r\n          </div>\r\n          <!-- <div v-if=\"userInfo.lastCourse\" class=\"course-history\">\r\n            <i class=\"iconfont\">&#xe62f;</i>\r\n            <span class=\"course-name ellipsis\">{{ userInfo.lastCourse && userInfo.lastCourse.name }}</span>\r\n            <span class=\"course-chapter ellipsis\">{{ userInfo.lastCourse && userInfo.lastCourse.chapter }}</span>\r\n            <span class=\"course-btn\" @click=\"handleHistoryClick\">继续</span>\r\n          </div> -->\r\n          <p class=\"exit-btn\">\r\n            <span @click=\"handleUserLogout\">安全退出</span>\r\n          </p>\r\n        </div>\r\n      </li>\r\n    </template>\r\n    <li v-else class=\"item sign\">\r\n      <span class=\"sign-btn\" @click=\"handleLoginClick\">登录</span>/\r\n      <span class=\"sign-btn\" @click=\"handleRegisterClick\">注册</span>\r\n    </li>\r\n  </ul>\r\n</template>\r\n<script>\r\nimport { getNotReadNotice } from 'api/notice.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      isDot: false,\r\n      cartList: [],\r\n      showMiniCart: false,\r\n      showUserInfo: false\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.userInfo[0].userId) {\r\n      this.isDot = true\r\n      //this.getNotReadNoticeData()\r\n    }\r\n  },\r\n  methods: {\r\n    // 鼠标移出\r\n    handleCarItemtMouseLeave () {\r\n      this.timer = setTimeout(() => {\r\n        this.showMiniCart = false\r\n      }, 150)\r\n    },\r\n    // 鼠标移入\r\n    handleCartMouseEnter () {\r\n      clearTimeout(this.timer)\r\n    },\r\n    // 登录点击\r\n    handleLoginClick () {\r\n      this.setShowLogin(true)\r\n      this.setLoginAction('login')\r\n    },\r\n    // 注册点击\r\n    handleRegisterClick () {\r\n      this.setShowLogin(true)\r\n      this.setLoginAction('register')\r\n    },\r\n    // 安全退出\r\n    handleUserLogout () {\r\n      this.logout().then(() => {\r\n        this.showUserInfo = false\r\n        this.$router.push('/home')\r\n      }).catch(() => {\r\n        this.$message.error('退出登录失败')\r\n      })\r\n    },\r\n    // 课程历史点击\r\n    handleHistoryClick () {\r\n      let random = new Date().getTime()\r\n      this.showUserInfo = false\r\n      this.$router.push(`/lesson/${random}`)\r\n    },\r\n    // 获取未读消息数据\r\n    getNotReadNoticeData () {\r\n      this.isDot = true\r\n      // getNotReadNotice().then(res => {\r\n      //   const { code, data } = res\r\n      //   if (code === ERR_OK && data === true) {\r\n      //     this.isDot = true\r\n      //   } else {\r\n      //     this.isDot = false\r\n      //   }\r\n      // }).catch(() => {\r\n      //   this.isDot = false\r\n      // })\r\n    },\r\n    // vuex\r\n    ...mapMutations('login', {\r\n      'setShowLogin': 'SET_SHOW_LOGIN',\r\n      'setLoginAction': 'SET_LOGIN_ACTION',\r\n      'setUserInfo': 'SET_USER_INFO'\r\n    }),\r\n    ...mapActions('login', {\r\n      'logout': 'logout'\r\n    })\r\n  },\r\n  computed: {\r\n    // vuex\r\n    ...mapGetters(['userInfo'])\r\n  },\r\n  components: {\r\n    MiniCart: () => import('components/cart/cart.vue')\r\n  },\r\n  beforeDestroy () {\r\n    clearTimeout(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl'\r\n  .login-area\r\n    float: right;\r\n    position: relative;\r\n    .item\r\n      float: left;\r\n      line-height: 72px;\r\n      font-size: 14px;\r\n      color: #71777d;\r\n      &:hover\r\n        .login-text\r\n          color: $red\r\n      &.invite > a\r\n        display: block;\r\n        width: 100px;\r\n        text-align: center;\r\n        & > img\r\n          margin-right: 8px\r\n          dispaly: inline-block;\r\n          vertical-align: middle;\r\n        & > span\r\n          dispaly: inline-block;\r\n          vertical-align: middle;\r\n      &.download\r\n        position: relative;\r\n        line-height: 74px;\r\n        & > a\r\n          display: block;\r\n          padding: 0 12px;\r\n          width: 60px;\r\n      &.cart\r\n        position: relative;\r\n        margin: 18px 0;\r\n        padding: 0 18px;\r\n        border: 1px solid #d9dde1;\r\n        border-radius: 18px;\r\n        line-height: 36px;\r\n        cursor: pointer;\r\n        &:hover\r\n          background-color: #f8fafc;\r\n        .iconfont\r\n          margin-right: 5px;\r\n          font-weight: 700;\r\n        .mini-chart-container\r\n          z-index: 999;\r\n          position: absolute;\r\n          right: 0;\r\n          top: 53px;\r\n      &.sign\r\n        margin-left: 10px;\r\n        .sign-btn\r\n          display: inline-block;\r\n          padding: 0 18px;\r\n          cursor: pointer;\r\n          &:hover\r\n            color: $red;\r\n      &.bell\r\n        padding: 2px 20px 0;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        cursor: pointer;\r\n        .mooc-badge\r\n          line-height: 1;\r\n          .iconfont\r\n            font-size: 22px;\r\n        &:hover\r\n          .iconfont\r\n            color: #F01414\r\n      &.userinfo\r\n        position: relative;\r\n        padding: 0 20px 0 15px;\r\n        height: 75px;\r\n        cursor: pointer;\r\n        &:hover\r\n          .img-box\r\n            box-shadow: 0 0 0 2px #F01414;\r\n        .img-box\r\n          margin-top: 22px;\r\n          width: 32px;\r\n          height: 32px;\r\n          background-color: #ccc;\r\n          border-radius: 50%;\r\n          &>img\r\n            display:block;\r\n            width: 100%;\r\n            height: 100%;\r\n            border-radius: 50%;\r\n        .userinfo-wrapper\r\n          z-index: 999;\r\n          position: absolute;\r\n          right: 0;\r\n          top: 72px;\r\n          width: 306px;\r\n          padding: 24px;\r\n          background-color: #fff;\r\n          border-bottom-left-radius: 12px;\r\n          border-bottom-right-radius: 12px;\r\n          box-shadow: 0 4px 8px $shadow;\r\n          box-sizing: border-box;\r\n          .userinfo-message-wrapper\r\n            display: flex;\r\n            align-items: center;\r\n            & > img\r\n              display: block;\r\n              margin-right: 20px;\r\n              width: 72px;\r\n              height: 72px;\r\n              border-radius: 50%;\r\n            .userinfo-message\r\n              flex: 1;\r\n              & > p\r\n                line-height: 1;\r\n                &.name\r\n                  font-size: 16px;\r\n                  color: #07111b;\r\n                  line-height: 24px;\r\n                &.number\r\n                  margin-top: 4px;\r\n                  font-size: 12px;\r\n                  line-height: 12px;\r\n                  .number-item\r\n                    margin-right: 10px;\r\n                    & > b\r\n                      margin-left: 2px;\r\n                      font-weight: 750;\r\n                      color: #93999f;\r\n          .fast-nav\r\n            display: flex;\r\n            align-items: center;\r\n            flex-wrap: wrap;\r\n            margin: 20px 0 10px;\r\n            .fast-nav-item\r\n              flex: 0 0 126px;\r\n              width: 126px;\r\n              height: 36px;\r\n              margin-right: 2px;\r\n              margin-bottom: 2px;\r\n              line-height: 36px;\r\n              color: #4d555d;\r\n              background-color: #F8FAFC;\r\n              border-radius: 2px;\r\n              text-indent: 10px;\r\n              &:hover\r\n                background-color: #D9DDE1;\r\n              .iconfont\r\n                margin-right: 5px;\r\n                color: #000;\r\n                font-weight: 700;\r\n                font-size: 16px;\r\n              a\r\n                color: #000;\r\n          .course-history\r\n            position: relative;\r\n            margin-bottom: 8px;\r\n            padding-bottom: 16px;\r\n            border-bottom: 1px solid #edf1f2;\r\n            color: #787d82;\r\n            line-height: 1;\r\n            .iconfont\r\n              display: inline-block;\r\n              vertical-align: middle;\r\n              font-size: 16px;\r\n              font-weight: 700;\r\n            span\r\n              padding-left: 4px;\r\n              width: 90%;\r\n              display: inline-block;\r\n              vertical-align: middle;\r\n              &.course-name\r\n                font-weight: 700;\r\n                line-height: 24px;\r\n              &.course-chapter\r\n                width: calc(90% - 20px);\r\n                margin-top: 8px;\r\n                padding-left: 20px;\r\n              &.course-btn\r\n                position: absolute;\r\n                right: 0;\r\n                bottom: 15px;\r\n                text-align: right;\r\n                color: #00b43c;\r\n          .exit-btn\r\n            line-height: 24px;\r\n            & > span\r\n              font-size: 14px;\r\n              line-height: 24px;\r\n            &:hover\r\n              color: #F01414;\r\n</style>\r\n"],"sourceRoot":"src/components/header"}]}