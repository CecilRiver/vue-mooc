{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js!C:\\GitTest\\vue-mooc\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\GitTest\\vue-mooc\\src\\utils\\axios.js","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\utils\\axios.js","mtime":1698894932469},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\eslint-loader\\index.js","mtime":1698895096052}],"contextDependencies":[],"result":["import \"core-js/modules/es6.promise\";\nimport axios from 'axios';\nimport store from \"../store/index.js\";\nimport components from \"../register.js\";\nvar Message = components.Message;\nvar service = axios.create({\n  timeout: 10000,\n  withCredentials: true\n}); // 请求拦截\n\nservice.interceptors.request.use(function (config) {\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n}); //响应拦截\n\nservice.interceptors.response.use(function (response) {\n  var status = response.status,\n      data = response.data;\n\n  if (status !== 200) {\n    Message.error('网络异常，请刷新或者重试!');\n    return Promise.reject('网络异常!');\n  }\n\n  if (data.code === 401) {\n    store.commit('login/SET_SHOW_LOGIN', true);\n    store.dispatch('login/logout');\n    return Promise.resolve({\n      code: -1,\n      msg: data.msg\n    });\n  } else {\n    return Promise.resolve(data);\n  }\n}, function (error) {\n  return Promise.reject(error);\n});\nexport default service;",{"version":3,"sources":["C:\\GitTest\\vue-mooc\\src\\utils\\axios.js"],"names":["axios","store","components","Message","service","create","timeout","withCredentials","interceptors","request","use","config","error","Promise","reject","response","status","data","code","commit","dispatch","resolve","msg"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP;AACA,OAAOC,UAAP;AACA,IAAMC,OAAO,GAAGD,UAAU,CAACC,OAA3B;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAE,KADkB;AAE3BC,EAAAA,eAAe,EAAE;AAFU,CAAb,CAAhB,C,CAKA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR,SAAOA,MAAP;AACD,CAHH,EAIE,UAAAC,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CANH,E,CASA;;AACAR,OAAO,CAACI,YAAR,CAAqBO,QAArB,CAA8BL,GAA9B,CACE,UAAAK,QAAQ,EAAI;AAAA,MACLC,MADK,GACWD,QADX,CACLC,MADK;AAAA,MACGC,IADH,GACWF,QADX,CACGE,IADH;;AAEV,MAAID,MAAM,KAAK,GAAf,EAAoB;AAClBb,IAAAA,OAAO,CAACS,KAAR,CAAc,eAAd;AACA,WAAOC,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;;AACD,MAAIG,IAAI,CAACC,IAAL,KAAc,GAAlB,EAAuB;AACrBjB,IAAAA,KAAK,CAACkB,MAAN,CAAa,sBAAb,EAAqC,IAArC;AACAlB,IAAAA,KAAK,CAACmB,QAAN,CAAe,cAAf;AACA,WAAOP,OAAO,CAACQ,OAAR,CAAgB;AACrBH,MAAAA,IAAI,EAAE,CAAC,CADc;AAErBI,MAAAA,GAAG,EAAEL,IAAI,CAACK;AAFW,KAAhB,CAAP;AAID,GAPD,MAOO;AACL,WAAOT,OAAO,CAACQ,OAAR,CAAgBJ,IAAhB,CAAP;AACD;AACF,CAjBH,EAkBE,UAAAL,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CApBH;AAuBA,eAAeR,OAAf","sourcesContent":["import axios from 'axios'\r\nimport store from '../store/index.js'\r\nimport components from '../register.js'\r\nconst Message = components.Message\r\nconst service = axios.create({\r\n  timeout: 10000,\r\n  withCredentials: true\r\n})\r\n\r\n// 请求拦截\r\nservice.interceptors.request.use(\r\n  config => {\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n//响应拦截\r\nservice.interceptors.response.use(\r\n  response => {\r\n    let {status, data} = response\r\n    if (status !== 200) {\r\n      Message.error('网络异常，请刷新或者重试!')\r\n      return Promise.reject('网络异常!')\r\n    }\r\n    if (data.code === 401) {\r\n      store.commit('login/SET_SHOW_LOGIN', true)\r\n      store.dispatch('login/logout')\r\n      return Promise.resolve({\r\n        code: -1,\r\n        msg: data.msg\r\n      })\r\n    } else {\r\n      return Promise.resolve(data)\r\n    }\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service"]}]}