{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js!C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\question\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\question\\index.vue","mtime":1698894932465},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\GitTest\\\\vue-mooc\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from 'components/pagination/pagination.vue';\nimport Empty from 'components/empty/empty.vue';\nimport { getFollowList, getQuestionList, getLabelList, followLabels } from 'api/question.js';\nimport { ERR_OK } from 'api/config.js';\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      size: 20,\n      isLoading: false,\n      dialogVisible: false,\n      currentIndex: 0,\n      followList: [],\n      questionList: [],\n      total: 0,\n      page: 1,\n      labelList: [],\n      selectLabelList: []\n    };\n  },\n  mounted: function mounted() {\n    if (this.userInfo.id) {\n      this.getFollowListData(true);\n    }\n\n    this.getQuestionListData();\n  },\n  methods: {\n    // 关注标签点击事件\n    handleLikeClick: function handleLikeClick(item, index) {\n      this.currentIndex = index;\n      this.getQuestionListData();\n    },\n    // 标签管理点击事件\n    handleLabelManageClick: function handleLabelManageClick() {\n      this.dialogVisible = true;\n      this.getLabelListData();\n    },\n    // 标签点击事件\n    handleLabelClick: function handleLabelClick(index, label, labelIndex) {\n      label.isSelected = !label.isSelected;\n      this.$set(this.labelList[index]['list'], labelIndex, label);\n    },\n    // 确认关联标签点击事件\n    handleFollowClick: function handleFollowClick() {\n      var _this = this;\n\n      var selectList = [];\n      this.labelList.forEach(function (type) {\n        var list = type.list;\n        list.forEach(function (item) {\n          if (item.isSelected) {\n            selectList.push(item);\n          }\n        });\n      });\n\n      if (selectList.length === 0) {\n        this.$message.warning('至少选择一个要关注的标签');\n        return false;\n      }\n\n      this.isLoading = true;\n      var params = {\n        list: selectList\n      };\n      followLabels(params).then(function (res) {\n        _this.isLoading = false;\n        var code = res.code,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          _this.$message.success(msg);\n\n          _this.dialogVisible = false;\n\n          _this.getFollowListData();\n        } else {\n          _this.$message.error(msg);\n        }\n      }).catch(function () {\n        _this.isLoading = false;\n\n        _this.$message.error('接口异常');\n      });\n    },\n    // 分页值更新\n    handlePaginationChange: function handlePaginationChange(page) {\n      this.page = page;\n      this.getQuestionListData();\n    },\n    // 获取关注标签列表\n    getFollowListData: function getFollowListData(isFirst) {\n      var _this2 = this;\n\n      this.followList = [];\n      getFollowList().then(function (res) {\n        var code = res.code,\n            data = res.data,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          if (data.length === 0 && isFirst) {\n            _this2.handleLabelManageClick();\n          } else {\n            data.unshift({\n              title: '全部'\n            });\n            _this2.followList = data;\n          }\n        } else {\n          _this2.$message.error(msg);\n        }\n      }).catch(function () {\n        _this2.$message.error('接口异常');\n      });\n    },\n    // 获取猿问数据\n    getQuestionListData: function getQuestionListData() {\n      var _this3 = this;\n\n      var params = {\n        page: this.page,\n        size: this.size,\n        label: this.currentLabel === '全部' ? '' : this.currentLabel\n      };\n      this.questionList = [];\n      getQuestionList(params).then(function (res) {\n        var code = res.code,\n            data = res.data,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          _this3.questionList = data.list;\n          _this3.total = data.total;\n        } else {\n          _this3.total = 0;\n\n          _this3.$message.error(msg);\n        }\n      }).catch(function () {\n        _this3.total = 0;\n\n        _this3.$message.error('接口异常');\n      });\n    },\n    // 获取标签列表\n    getLabelListData: function getLabelListData() {\n      var _this4 = this;\n\n      this.labelList = [];\n      getLabelList().then(function (res) {\n        var code = res.code,\n            data = res.data,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          _this4.labelList = _this4.normalizeLabelList(data);\n        } else {\n          _this4.$message.error(msg);\n        }\n      }).catch(function () {\n        _this4.$message.error('接口异常');\n      });\n    },\n    // 处理标签数据\n    normalizeLabelList: function normalizeLabelList(array) {\n      var _this5 = this;\n\n      if (array.length === 0) {\n        return [];\n      }\n\n      var labelTreeObj = [];\n      array.forEach(function (item) {\n        var findIndex = labelTreeObj.findIndex(function (filter) {\n          return filter.title === item.type.text;\n        }); // 判断当前标签是否在已关注列表中\n\n        var selectIndex = _this5.followList.findIndex(function (filterItem) {\n          return filterItem.labelid === item.id;\n        });\n\n        if (selectIndex === -1) {\n          item.isSelected = false;\n        } else {\n          item.isSelected = true;\n        }\n\n        if (findIndex === -1) {\n          labelTreeObj.push({\n            title: item.type.text,\n            list: [item]\n          });\n        } else {\n          labelTreeObj[findIndex].list.push(item);\n        }\n      });\n      return labelTreeObj;\n    }\n  },\n  computed: _objectSpread({\n    currentLabel: function currentLabel() {\n      if (this.followList.length === 0) {\n        return '';\n      }\n\n      return this.followList[this.currentIndex].title;\n    }\n  }, mapGetters(['userInfo'])),\n  components: {\n    Pagination: Pagination,\n    Empty: Empty\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"question\">\r\n    <!-- 头部 -->\r\n    <div class=\"question-header m-center\">\r\n      <div class=\"question-search\">\r\n        <img src=\"https://www.imooc.com/static/img/wenda/wenda-logo.png\" alt=\"\">\r\n        <div class=\"search-box\">\r\n          <input type=\"text\" placeholder=\"请输入你的问题\">\r\n          <i class=\"iconfont\">&#xe63c;</i>\r\n        </div>\r\n        <div class=\"search-btn\">\r\n          提问\r\n        </div>\r\n      </div>\r\n      <div v-if=\"userInfo.id\" class=\"question-nav\">\r\n        <dl>\r\n          <dt>我的关注：</dt>\r\n          <dd\r\n            v-for=\"(item, index) in followList\"\r\n            :key=\"index\"\r\n            :class=\"{\r\n              active: currentIndex == index\r\n            }\"\r\n            @click=\"handleLikeClick(item, index)\"\r\n          >\r\n            {{ item.title }}\r\n          </dd>\r\n          <dd @click=\"handleLabelManageClick\">标签管理</dd>\r\n        </dl>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 列表部分 -->\r\n    <div class=\"m-center\">\r\n      <div class=\"question-content-container\">\r\n        <div class=\"question-list\">\r\n          <ul v-if=\"questionList && questionList.length\">\r\n            <li v-for=\"(item, index) in questionList\" :key=\"index\" class=\"question-item\">\r\n              <div class=\"finish\">\r\n                <span v-if=\"item.isResolve\" class=\"iconfont\">&#xe786;</span>\r\n                <span>{{ item.answers }}</span>\r\n              </div>\r\n              <div class=\"content-box\">\r\n                <h3 class=\"title\">\r\n                  {{ item.title }}\r\n                </h3>\r\n                <p class=\"tag\">\r\n                  <img :src=\"item.icon\" alt=\"\">\r\n                  <span\r\n                    v-for=\"(tag, index) in item.tags\"\r\n                    :key=\"index\"\r\n                    class=\"name\"\r\n                  >{{ tag }}</span>\r\n                  <span class=\"view-box\">\r\n                    <i class=\"iconfont\">&#xe681;</i>\r\n                    <span class=\"view-number\">{{ item.views }}</span>\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n          <empty v-else message=\"暂无相关猿问数据\"></empty>\r\n        </div>\r\n      </div>\r\n      <pagination :size=\"size\" :total=\"total\" :page.sync=\"page\" @change=\"handlePaginationChange\" />\r\n    </div>\r\n\r\n    <!-- 标签管理弹出 -->\r\n    <mooc-dialog title=\"选择感兴趣的标签\" :visible.sync=\"dialogVisible\" width=\"600px\">\r\n      <el-scrollbar>\r\n        <div class=\"label-container\">\r\n          <dl\r\n            v-for=\"(type, index) in labelList\"\r\n            :key=\"index\"\r\n            class=\"label-group\"\r\n          >\r\n            <dt class=\"label-group-title\">{{ type.title }}</dt>\r\n            <dd\r\n              v-for=\"(label, labelIndex) in type.list\"\r\n              :key=\"labelIndex\"\r\n              class=\"label-item\"\r\n              :class=\"{\r\n                'is-active': label.isSelected\r\n              }\"\r\n              @click=\"handleLabelClick(index, label, labelIndex)\"\r\n            >\r\n              {{ label.title }}\r\n            </dd>\r\n          </dl>\r\n        </div>\r\n      </el-scrollbar>\r\n      <template slot=\"footer\">\r\n        <mooc-button type=\"success\" :disabled=\"isLoading\" @click=\"handleFollowClick\">完成</mooc-button>\r\n      </template>\r\n    </mooc-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Pagination from 'components/pagination/pagination.vue'\r\nimport Empty from 'components/empty/empty.vue'\r\nimport { getFollowList, getQuestionList, getLabelList, followLabels } from 'api/question.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      size: 20,\r\n      isLoading: false,\r\n      dialogVisible: false,\r\n      currentIndex: 0,\r\n      followList: [],\r\n      questionList: [],\r\n      total: 0,\r\n      page: 1,\r\n      labelList: [],\r\n      selectLabelList: []\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.userInfo.id) {\r\n      this.getFollowListData(true)\r\n    }\r\n    this.getQuestionListData()\r\n  },\r\n  methods: {\r\n    // 关注标签点击事件\r\n    handleLikeClick (item, index) {\r\n      this.currentIndex = index\r\n      this.getQuestionListData()\r\n    },\r\n    // 标签管理点击事件\r\n    handleLabelManageClick () {\r\n      this.dialogVisible = true\r\n      this.getLabelListData()\r\n    },\r\n    // 标签点击事件\r\n    handleLabelClick (index, label, labelIndex) {\r\n      label.isSelected = !label.isSelected\r\n      this.$set(this.labelList[index]['list'], labelIndex, label)\r\n    },\r\n    // 确认关联标签点击事件\r\n    handleFollowClick () {\r\n      const selectList = []\r\n      this.labelList.forEach(type => {\r\n        const list = type.list\r\n        list.forEach(item => {\r\n          if (item.isSelected) {\r\n            selectList.push(item)\r\n          }\r\n        })\r\n      })\r\n      if (selectList.length === 0) {\r\n        this.$message.warning('至少选择一个要关注的标签')\r\n        return false\r\n      }\r\n      this.isLoading = true\r\n      const params = {\r\n        list: selectList\r\n      }\r\n      followLabels(params).then(res => {\r\n        this.isLoading = false\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.$message.success(msg)\r\n          this.dialogVisible = false\r\n          this.getFollowListData()\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.isLoading = false\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 分页值更新\r\n    handlePaginationChange (page) {\r\n      this.page = page\r\n      this.getQuestionListData()\r\n    },\r\n    // 获取关注标签列表\r\n    getFollowListData (isFirst) {\r\n      this.followList = []\r\n      getFollowList().then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          if (data.length === 0 && isFirst) {\r\n            this.handleLabelManageClick()\r\n          } else {\r\n            data.unshift({\r\n              title: '全部'\r\n            })\r\n            this.followList = data\r\n          }\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取猿问数据\r\n    getQuestionListData () {\r\n      const params = {\r\n        page: this.page,\r\n        size: this.size,\r\n        label: this.currentLabel === '全部' ? '' : this.currentLabel\r\n      }\r\n      this.questionList = []\r\n      getQuestionList(params).then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.questionList = data.list\r\n          this.total = data.total\r\n        } else {\r\n          this.total = 0\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.total = 0\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取标签列表\r\n    getLabelListData () {\r\n      this.labelList = []\r\n      getLabelList().then(res => {\r\n        const { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.labelList = this.normalizeLabelList(data)\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 处理标签数据\r\n    normalizeLabelList (array) {\r\n      if (array.length === 0) {\r\n        return []\r\n      }\r\n      const labelTreeObj = []\r\n      array.forEach(item => {\r\n        const findIndex = labelTreeObj.findIndex(filter => filter.title === item.type.text)\r\n        // 判断当前标签是否在已关注列表中\r\n        const selectIndex = this.followList.findIndex(filterItem => filterItem.labelid === item.id)\r\n        if (selectIndex === -1) {\r\n          item.isSelected = false\r\n        } else {\r\n          item.isSelected = true\r\n        }\r\n        if (findIndex === -1) {\r\n          labelTreeObj.push({\r\n            title: item.type.text,\r\n            list: [item]\r\n          })\r\n        } else {\r\n          labelTreeObj[findIndex].list.push(item)\r\n        }\r\n      })\r\n      return labelTreeObj\r\n    }\r\n  },\r\n  computed: {\r\n    currentLabel () {\r\n      if (this.followList.length === 0) {\r\n        return ''\r\n      }\r\n      return this.followList[this.currentIndex].title\r\n    },\r\n    ...mapGetters(['userInfo'])\r\n  },\r\n  components: {\r\n    Pagination,\r\n    Empty\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl';\r\n  .question\r\n    padding: 20px 0 50px;\r\n    .question-header\r\n      .question-search\r\n        position: relative;\r\n        padding-right: 75px;\r\n        background-color: #fff;\r\n        border-bottom: 1px solid rgba(7,17,27,0.1);\r\n        & > img\r\n          width: 300px;\r\n          height: 60px;\r\n        .search-box\r\n          float: right;\r\n          position: relative;\r\n          margin-top: 16px;\r\n          width: 480px;\r\n          height: 36px;\r\n          line-height: 36px;\r\n          border-radius: 8px;\r\n          background-color: $border-three-color;\r\n          & > input\r\n            padding: 0 60px 0 10px;\r\n            width: 100%;\r\n            height: 36px;\r\n            outline: none;\r\n            background: none;\r\n            box-sizing: border-box;\r\n            color: $font-four-color;\r\n            font-size: 14px;\r\n          .iconfont\r\n            display: inline-block;\r\n            position: absolute;\r\n            top: 0;\r\n            right: 20px;\r\n            font-size: 20px;\r\n            font-weight: 700;\r\n            color: $font-four-color;\r\n            cursor: pointer;\r\n        .search-btn\r\n          position: absolute;\r\n          right: 0;\r\n          top: 16px;\r\n          padding: 7px 16px;\r\n          background-color: #1fad4e;\r\n          border-radius: 18px;\r\n          color: #fff;\r\n          font-size: 14px;\r\n          line-height: 24px;\r\n          cursor: pointer;\r\n          &:hover\r\n            background-color: #17823b;\r\n      .question-nav\r\n        position: relative;\r\n        padding: 18px 0;\r\n        border-bottom: 1px solid rgba(7,17,27,0.1);\r\n        dt, dd\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 20px;\r\n          font-size: 14px;\r\n          line-height: 24px;\r\n        dd\r\n          cursor: pointer;\r\n          &:last-child\r\n            float: right;\r\n            margin-right: 0;\r\n          &:hover, &.active\r\n            color: $theme-green-color;\r\n    .question-content-container\r\n      margin-top: 30px;\r\n      .question-list\r\n        padding: 28px 32px;\r\n        background-color: #fff;\r\n        border-radius: 12px;\r\n        box-shadow: 0 4px 8px 2px rgba(7,17,27,.1)\r\n        .question-item\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 16px 0;\r\n          border-bottom: 1px solid rgba(7,17,27,0.1);\r\n          &:last-child\r\n            border-bottom: none;\r\n          .finish\r\n            flex: 0 0 40px;\r\n            width: 40px;\r\n            padding: 8px 0;\r\n            margin-right: 15px;\r\n            background-color: rgba(31,173,78,.1);\r\n            color: #17823b;\r\n            & > span\r\n              display: block;\r\n              text-align: center;\r\n              line-height: 18px;\r\n              font-size: 16px;\r\n              font-weight: 700;\r\n              &:last-child\r\n                font-weight: 400;\r\n                font-size: 14px;\r\n          .content-box\r\n            flex: 1;\r\n            .title\r\n              margin-bottom: 4px;\r\n              font-size: 16px;\r\n              color: $font-first-color;\r\n              font-weight: 700;\r\n              line-height: 24px;\r\n              cursor: pointer;\r\n              &:hover\r\n                color: #1fad4e;\r\n            .tag\r\n              font-size: 12px;\r\n              color: $font-four-color;\r\n              & > img\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                margin-top: -2px;\r\n                width: 16px;\r\n                height: 16px;\r\n                border-radius: 50%;\r\n              & > span\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                &.name\r\n                  padding: 0 10px 0 5px;\r\n                &.view-box\r\n                  padding-left: 10px;\r\n                  & > i, & > span\r\n                    display: inline-block;\r\n                    vertical-align: middle;\r\n      .list-empty\r\n        padding: 10px 0;\r\n        text-align: center;\r\n        font-size: 14px;\r\n        color: $theme-red-color;\r\n     .label-container\r\n        padding-left: 20px;\r\n       .label-group\r\n        display: inline-block;\r\n        vertical-align: top;\r\n        margin-bottom: 18px;\r\n        width: 250px;\r\n        &:nth-child(2n + 1)\r\n          margin-right: 20px;\r\n        .label-group-title\r\n          margin-bottom: 18px;\r\n          font-size: 14px;\r\n          color: $theme-green-color;\r\n          font-weight: bold;\r\n        .label-item\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 8px;\r\n          margin-bottom: 8px;\r\n          padding: 8px 16px;\r\n          border-radius: 16px;\r\n          background-color: rgba(28,31,33,.08);\r\n          line-height: 16px;\r\n          cursor: pointer;\r\n          transition: all 0.3s;\r\n          &:hover, &.is-active\r\n            color: #fff;\r\n            background-color: $theme-green-color;\r\n    >>> .mooc-dialog\r\n      .mooc-dialog-body\r\n        padding-top: 20px;\r\n      .mooc-dialog-footer\r\n        text-align: center;\r\n        .mooc-button\r\n          width: 200px;\r\n          border-radius: 24px;\r\n      .el-scrollbar\r\n        height: 360px;\r\n</style>"],"sourceRoot":"src/pages/question"}]}