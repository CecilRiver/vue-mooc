{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js!C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\components\\comment\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\components\\comment\\comment.vue","mtime":1698894932453},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getLessonComment as _getLessonComment } from 'api/lesson.js';\nimport { ERR_OK } from 'api/config.js';\nexport default {\n  data: function data() {\n    return {\n      commentList: []\n    };\n  },\n  mounted: function mounted() {\n    this.getLessonComment();\n  },\n  methods: {\n    // 分页值更新\n    handlePaginationChange: function handlePaginationChange(page) {\n      this.page = page;\n      this.getLessonComment();\n    },\n    // 获取课程评价列表\n    getLessonComment: function getLessonComment() {\n      var _this = this;\n\n      var params = {\n        id: this.$route.params.id\n      };\n      this.commentList = [];\n\n      _getLessonComment(params).then(function (res) {\n        var code = res.code,\n            data = res.data,\n            msg = res.msg;\n\n        if (code === ERR_OK) {\n          _this.commentList = data;\n        } else {\n          _this.$message.error(msg);\n        }\n      }).catch(function () {\n        _this.$message.error('接口异常');\n      });\n    },\n    // 获取单个评价总分\n    getCommentScore: function getCommentScore(comment) {\n      var cacheScore = {};\n\n      if (cacheScore[comment['_id']]) {\n        return cacheScore[comment['_id']];\n      }\n\n      var _comment$content_scor = comment.content_score,\n          content_score = _comment$content_scor === void 0 ? 0 : _comment$content_scor,\n          _comment$easy_score = comment.easy_score,\n          easy_score = _comment$easy_score === void 0 ? 0 : _comment$easy_score,\n          _comment$logic_score = comment.logic_score,\n          logic_score = _comment$logic_score === void 0 ? 0 : _comment$logic_score;\n      var score = Number(((content_score + easy_score + logic_score) / 3).toFixed(2));\n      cacheScore[comment['_id']] = score;\n      return Number(((content_score + easy_score + logic_score) / 3).toFixed(2));\n    }\n  },\n  computed: {\n    totalScore: function totalScore() {\n      if (this.commentList.length === 0) {\n        return {\n          total: 0,\n          content_score: 0,\n          easy_score: 0,\n          logic_score: 0\n        };\n      }\n\n      var score = {\n        total: 0,\n        content_score: 0,\n        easy_score: 0,\n        logic_score: 0\n      };\n      var length = this.commentList.length;\n      this.commentList.forEach(function (item) {\n        score['content_score'] += parseFloat(item['content_score']);\n        score['easy_score'] += parseFloat(item['easy_score']);\n        score['logic_score'] += parseFloat(item['logic_score']);\n      });\n      score['total'] = (score['content_score'] + score['easy_score'] + score['logic_score']) / 3;\n\n      for (var key in score) {\n        score[key] = Number((score[key] / length).toFixed(2));\n      }\n\n      return score;\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"comment\">\r\n    <!-- 评价总览 -->\r\n    <div class=\"score-overview\">\r\n      <div class=\"star-box\">\r\n        <span class=\"title\">综合评分</span>\r\n        <span class=\"score\">{{ totalScore.total }}</span>\r\n        <mooc-star :value=\"totalScore.total / 2\" :size=\"18\" disabled />\r\n      </div>\r\n      <div class=\"score-box\">\r\n        <span>内容实用</span>\r\n        <span class=\"score\">{{ totalScore.content_score }}</span>\r\n      </div>\r\n      <div class=\"score-box\">\r\n        <span>简洁易懂</span>\r\n        <span class=\"score\">{{ totalScore.easy_score }}</span>\r\n      </div>\r\n      <div class=\"score-box\">\r\n        <span>逻辑清晰</span>\r\n        <span class=\"score\">{{ totalScore.logic_score }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评价列表 -->\r\n    <ul class=\"comment-list\">\r\n      <li\r\n        v-for=\"(comment,index) in commentList\"\r\n        :key=\"index\"\r\n        class=\"comment-item\"\r\n      >\r\n        <div class=\"img-box\">\r\n          <img :src=\"comment.avatar\" alt=\"\">\r\n        </div>\r\n        <div class=\"comment-content-wrapper\">\r\n          <p>\r\n            <span class=\"name\">{{ comment.name }}</span>\r\n            <span class=\"score\">\r\n              <MoocStar :value=\"getCommentScore(comment)\" :size=\"16\" :disabled=\"true\" />\r\n              {{ getCommentScore(comment) }}分\r\n            </span>\r\n          </p>\r\n          <p class=\"content\">\r\n            {{ comment.comment }}\r\n          </p>\r\n          <p>\r\n            <span class=\"time\">时间：{{ comment.time }}</span>\r\n          </p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getLessonComment } from 'api/lesson.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      commentList: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getLessonComment()\r\n  },\r\n  methods: {\r\n    // 分页值更新\r\n    handlePaginationChange (page) {\r\n      this.page = page\r\n      this.getLessonComment()\r\n    },\r\n    // 获取课程评价列表\r\n    getLessonComment () {\r\n      const params = {\r\n        id: this.$route.params.id\r\n      }\r\n      this.commentList = []\r\n      getLessonComment(params).then((res) => {\r\n        const { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.commentList = data\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取单个评价总分\r\n    getCommentScore (comment) {\r\n      const cacheScore = {}\r\n      if (cacheScore[comment['_id']]) {\r\n        return cacheScore[comment['_id']]\r\n      }\r\n      const { content_score = 0, easy_score = 0, logic_score = 0 } = comment\r\n      const score = Number(((content_score + easy_score + logic_score) / 3).toFixed(2))\r\n      cacheScore[comment['_id']] = score\r\n      return Number(((content_score + easy_score + logic_score) / 3).toFixed(2))\r\n    }\r\n  }, \r\n  computed: {\r\n    totalScore () {\r\n      if (this.commentList.length === 0) {\r\n        return {\r\n          total: 0,\r\n          content_score: 0,\r\n          easy_score: 0,\r\n          logic_score: 0\r\n        }\r\n      }\r\n      let score = {\r\n        total: 0,\r\n        content_score: 0,\r\n        easy_score: 0,\r\n        logic_score: 0\r\n      }\r\n      const length = this.commentList.length\r\n      this.commentList.forEach(item => {\r\n        score['content_score'] += parseFloat(item['content_score'])\r\n        score['easy_score'] += parseFloat(item['easy_score'])\r\n        score['logic_score'] += parseFloat(item['logic_score'])\r\n      })\r\n      score['total'] = (score['content_score'] + score['easy_score'] + score['logic_score']) / 3\r\n      for (const key in score) {\r\n        score[key] = Number((score[key] / length).toFixed(2))\r\n      }\r\n      return score\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .comment\r\n    .score-overview\r\n      padding: 24px 32px;\r\n      display: flex;\r\n      align-items: center;\r\n      background-color: #fff;\r\n      box-shadow: 0 0 8px 4px rgba(7,17,27,0.1);\r\n      border-radius: 12px;\r\n      .star-box\r\n        flex: 1;\r\n        & > span\r\n          display: inline-block;\r\n          vertical-align:  middle;\r\n          line-height: 24px;\r\n          &.title\r\n            width: 40px;\r\n            text-align: center;\r\n            color: #1c1f21;\r\n            font-size: 14px;\r\n            line-height: 16px;\r\n            font-weight: 700;\r\n          &.score\r\n            padding-left: 5px;\r\n            font-size: 32px;\r\n            color: #4d555d;\r\n            font-weight: 700;\r\n        >>> .star\r\n          margin-left: 10px;\r\n          vertical-align: middle;\r\n          .star-item\r\n            margin-right: 3px;\r\n      .score-box\r\n        margin-left: 50px;\r\n        & > span\r\n          display: inline-block;\r\n          vertical-align:  middle;\r\n          line-height: 24px;\r\n          font-size: 14px;\r\n          &.score\r\n            padding-left: 12px;\r\n            font-size: 26px;\r\n            color: #f90;\r\n            font-weight: 700;\r\n    .comment-list\r\n      margin-top: 24px;\r\n      .comment-item\r\n        margin-bottom: 8px;\r\n        padding: 24px; 36px;\r\n        display: flex;\r\n        align-items: flex-start;\r\n        background-color: #fff;\r\n        box-shadow: 0 0 8px 4px rgba(7,17,27,.1);\r\n        border-radius: 12px;\r\n        .img-box\r\n          margin-right: 20px;\r\n          flex: 0 0 48px;\r\n          width: 48px;\r\n          height: 48px;\r\n          & > img\r\n            display: block;\r\n            width: 100%;\r\n            height: 100%;\r\n            border-radius: 50%;\r\n            background-color: #eee;\r\n        .comment-content-wrapper\r\n          flex: 1;\r\n          & > p\r\n            font-size: 14px;\r\n            color: #14191e;\r\n            line-height: 24px;\r\n            &.content\r\n              margin-top: 4px;\r\n              margin-bottom: 8px;\r\n              line-height: 28px;\r\n            .name\r\n              color: #787d82;\r\n              font-weight: 700;\r\n            .score, .time\r\n              float: right;\r\n            .time\r\n              color: #b5b9bc;\r\n              font-size: 12px;\r\n</style>"],"sourceRoot":"src/components/comment"}]}