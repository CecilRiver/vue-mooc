{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\order\\list.vue?vue&type=style&index=0&id=923a467a&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\order\\list.vue","mtime":1700049329241},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\stylus-loader\\index.js","mtime":1698895086074},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.list\n  .list-tab\n    dt, dd\n      display: inline-block;\n      vertical-align: middle;\n    dt\n      position: relative;\n      margin-right: 20px;\n      padding-right: 20px;\n      font-size: 16px;\n      color: #07111b;\n      line-height: 32px;\n      font-weight: 700;\n      &::after\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 6px;\n        width: 1px;\n        height: 20px;\n        background-color: #d9dde1;\n    dd\n      padding: 10px 40px;\n      font-size:12px;\n      color: #5e5e5e;\n      cursor: pointer;\n      &.active\n        background-color: #4d555d;\n        border-radius: 16px;\n        color: #fff;\n  .order-list\n    margin-top: 24px;\n    .order-item\n      padding: 10px 32px 32px 32px;\n      margin-bottom: 24px;\n      border-radius: 12px;\n      box-shadow: 0 2px 8px 2px rgba(0,0,0,0.1);\n      background-color: #fff;\n      cursor: pointer;\n      &:hover\n        box-shadow: 0 2px 12px 4px rgba(0,0,0,0.1);\n        .order-title\n          .iconfont.delete\n            display: block;\n      .order-title\n        margin-bottom: 24px;\n        font-size: 12px;\n        font-weight: 700;\n        color: #333;\n        line-height: 48px;\n        border-bottom: 1px solid #b7bbbf;\n        .iconfont\n          margin-right: 5px;\n          color: #f01414;\n          &.delete\n            display: none;\n            float: right;\n            color: #93999f;\n        .order-time\n          margin-left: 25px;\n          color: #93999f;\n      .order-list-box\n        display: flex;\n        align-items: flex-start;\n        justify-content: space-between;\n        position: relative;\n        dl\n          flex: 1;\n          border-right: 1px solid #d9dde1;\n          .order-content\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin-bottom: 24px;\n            padding-bottom: 24px;\n            border-bottom: 1px solid #d9dde1;\n            &:last-child\n              border-bottom: none;\n              margin-bottom: 0px;\n              padding-bottom: 0px;\n            .img-box\n              flex: 0 0 160px;\n              width: 160px;\n            .order-name-box\n              flex: 1;\n              margin-left: 20px;\n              text-align: left;\n              height: 90px;\n              .order-name\n                margin-bottom: 8px;\n                color: #07111b;\n                line-height: 24px;\n                font-size: 14px;\n              .order-real-price\n                font-size: 13px;\n                color: #f01414;\n        .order-price-box, .order-status-box\n          flex: 0 0 200px;\n          width: 200px;\n          text-align: left;\n          font-size: 12px;\n          color: #93999f;\n          & > p\n            line-height: 24px;\n        .order-price-box\n          margin-right: 200px;\n          padding-top: 10px;\n          padding-left: 20px;\n          box-sizing: border-box;\n          .old\n            text-decoration: line-through;\n          .real\n            color: #f01414;\n            & > span\n              margin-top: 20px;\n              margin-left: 20px;\n              display: inline-block;\n              vertical-align: middle;\n              font-size: 16px;\n        .order-status-box\n          padding-top: 20px;\n          text-align: center;\n          box-sizing: border-box;\n          position: absolute;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          border-left: 1px solid #d9dde1;\n          .order-status\n            font-size: 14px;\n            color: #4d555d;\n          .order-pay-btn\n            margin: 0px auto 5px;\n            width:120px;\n            height:36px;\n            border-radius: 18px;\n            background-color: #f01414;\n            color: #fff;\n            text-align: center;\n            line-height: 36px;\n",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/order","sourcesContent":["<template>\r\n  <div class=\"list\">\r\n    <!-- 选项卡 -->\r\n    <dl class=\"list-tab\">\r\n      <dt>我的任务</dt>\r\n      <dd\r\n        v-for=\"(item,index) in navList\"\r\n        :key=\"item.id\"\r\n        :class=\"{active: currentIndex == index}\"\r\n        @click=\"handleNavClick(index)\"\r\n      >\r\n        <i v-if=\"item.type==4\" class=\"iconfont\">&#xe622;</i>{{ item.title }}\r\n      </dd>\r\n    </dl>\r\n\r\n    <!-- 列表 -->\r\n    <ul v-if=\"orderList.length > 0\" class=\"order-list\">\r\n      <li\r\n        v-for=\"item in orderList\"\r\n        :key=\"item.id\"\r\n        class=\"order-item\"\r\n      >\r\n        <h2 class=\"order-title\">\r\n          <i class=\"iconfont\">&#xe70b;</i>\r\n          任务编号：\r\n          <!-- <router-link :to=\"{ path: '/taskDetails/' + item.submissionId }\"></router-link> -->\r\n          {{ item.submissionId }}\r\n          任务状态：{{ navList[item.status+1].title}}\r\n          <br>\r\n          <router-link :to=\"{ path: '/taskDetails/' + item.submissionId }\" style=\"color: red; font-size: 18px;\">查看</router-link>\r\n          <!-- <span class=\"order-time\">{{ item.time }}</span> -->\r\n          <!-- <i class=\"iconfont delete\" title=\"删除订单\" @click=\"handleDeleteClick(item)\">&#xe622;</i> -->\r\n        </h2>\r\n        <!-- <div class=\"order-list-box\"> -->\r\n          <!-- <dl>\r\n            <dd v-for=\"(course,index) in item.list\" :key=\"index\" class=\"order-content\">\r\n              <div class=\"img-box\">\r\n                <img :src=\"course.img\" width=\"160\" height=\"90\" alt=\"\">\r\n              </div>\r\n              <div class=\"order-name-box\">\r\n                <p class=\"order-name\">\r\n                  {{ course.title }}\r\n                </p>\r\n                <p class=\"order-real-price\">\r\n                  ¥ {{ course.isDiscount ? course.discountPrice : course.price }}\r\n                </p>\r\n              </div>\r\n            </dd>\r\n          </dl> -->\r\n          <!-- <div class=\"order-price-box\"> -->\r\n            <!-- <template> -->\r\n              <!-- <p class=\"price-item old\">\r\n                原价 ¥{{ item.oldPrice }}\r\n              </p>\r\n              <p class=\"price-item\">\r\n                折扣 -¥{{ item.discount }}\r\n              </p> -->\r\n              <!-- <p class=\"price-item real\">\r\n                <span>¥ {{ getTotal(item.list) }}</span>\r\n              </p> -->\r\n            <!-- </template>          -->\r\n          <!-- </div> -->\r\n          <!-- <div class=\"order-status-box\">\r\n            <template v-if=\"item.status.code==0\">\r\n              <p class=\"order-pay-btn\" @click=\"handlePayClick(item)\">\r\n                立即支付\r\n              </p>\r\n              <p class=\"order-cancel\" @click=\"handleCancelClick(item)\">\r\n                取消订单\r\n              </p>\r\n            </template>\r\n            <template v-else>\r\n              <p class=\"order-status\">\r\n                {{ item.status.text }}\r\n              </p>\r\n              <p v-if=\"item.status.code == 1\" class=\"order-pay\">\r\n                {{ item.way.text }}\r\n              </p>\r\n            </template>\r\n          </div> -->\r\n        <!-- </div> -->\r\n      </li>\r\n    </ul>\r\n    <empty v-else message=\"暂无相关任务数据\"></empty>\r\n\r\n    <!-- 分页 -->\r\n    <pagination\r\n      :size=\"size\"\r\n      :page.sync=\"page\"\r\n      :total=\"total\"\r\n    ></pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Pagination from 'components/pagination/pagination.vue'\r\nimport Empty from 'components/empty/empty.vue'\r\nimport { getOrderList, cancelOrder, deleteOrder } from 'api/order.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      size: 15,\r\n      page: 1,\r\n      total: 0,\r\n      currentIndex: 0,\r\n      navList: [],\r\n      orderList: []\r\n    }\r\n  },\r\n  created () {\r\n    this.navList = [\r\n      { id: 1, title: '全部', status: ''},\r\n      { id: 2, title: '未完成', status: 0},\r\n      { id: 3, title: '已完成', status: 1},\r\n      { id: 4, title: '已失效', status: 2}\r\n    ]\r\n    this.getOrderListData()\r\n  },\r\n  methods: {\r\n    // 导航点击\r\n    handleNavClick (index) {\r\n      this.currentIndex = index\r\n      this.getOrderListData()\r\n    },\r\n    // 删除订单\r\n    handleDeleteClick (order) {\r\n      this.$confirm('是否确认删除订单？', '提示', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const params = {\r\n          id: order.id\r\n        }\r\n        deleteOrder(params).then(res => {\r\n          const { code, msg } = res\r\n          if (code === ERR_OK) {\r\n            this.$message.success(msg)\r\n            this.getOrderListData()\r\n          } else {\r\n            this.$message.error(msg)\r\n          }\r\n        }).catch(() => {\r\n          this.$message.error('接口异常')\r\n        })\r\n      })\r\n    },\r\n    // 取消订单\r\n    handleCancelClick (order) {\r\n      this.$confirm('是否确认取消订单？', '提示', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const params = {\r\n          id: order.id\r\n        }\r\n        cancelOrder(params).then(res => {\r\n          const { code, msg } = res\r\n          if (code === ERR_OK) {\r\n            this.$message.success(msg)\r\n            this.getOrderListData()\r\n          } else {\r\n            this.$message.error(msg)\r\n          }\r\n        }).catch(() => {\r\n          this.$message.error('接口异常')\r\n        })\r\n      })\r\n    },\r\n    // 订单支付\r\n    handlePayClick (order) {\r\n      this.$router.push(`/cart/pay/${order.code}`)\r\n    },\r\n    // 获取用户任务列表\r\n    getOrderListData () {\r\n      // const params = {\r\n      //   page: this.page,\r\n      //   size: this.size,\r\n      //   status: this.currentStatus\r\n      // }\r\n      const userInfo = this.$store.getters.userInfo;\r\n      const params = {\r\n        userId: userInfo[0].userId  ,\r\n        type:this.currentStatus\r\n      }\r\n      getOrderList(params).then(res => {\r\n        let { msg, code, page } = res\r\n        if (code === ERR_OK) {\r\n          this.orderList = page.list\r\n          this.total = page.totalCount\r\n        } else {\r\n          this.orderList = []\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.orderList = []\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 计算总额度\r\n    getTotal (list) {\r\n      if (!list || list.length === 0) {\r\n        return 0\r\n      }\r\n      let total = 0\r\n      list.forEach(item => {\r\n        if (item.isDiscount) {\r\n          total += parseFloat(Number(total + parseFloat(item.discountPrice)).toFixed(2))\r\n        } else {\r\n          total += parseFloat(Number(total + parseFloat(item.price)).toFixed(2))\r\n        }\r\n      })\r\n      return total\r\n    }\r\n  },\r\n  computed:{\r\n    currentStatus () {\r\n      return this.navList[this.currentIndex].title\r\n    }\r\n  },\r\n  components: {\r\n    Pagination,\r\n    Empty\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .list\r\n    .list-tab\r\n      dt, dd\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n      dt\r\n        position: relative;\r\n        margin-right: 20px;\r\n        padding-right: 20px;\r\n        font-size: 16px;\r\n        color: #07111b;\r\n        line-height: 32px;\r\n        font-weight: 700;\r\n        &::after\r\n          content: '';\r\n          position: absolute;\r\n          right: 0;\r\n          top: 6px;\r\n          width: 1px;\r\n          height: 20px;\r\n          background-color: #d9dde1;\r\n      dd\r\n        padding: 10px 40px;\r\n        font-size:12px;\r\n        color: #5e5e5e;\r\n        cursor: pointer;\r\n        &.active\r\n          background-color: #4d555d;\r\n          border-radius: 16px;\r\n          color: #fff;\r\n    .order-list\r\n      margin-top: 24px;\r\n      .order-item\r\n        padding: 10px 32px 32px 32px;\r\n        margin-bottom: 24px;\r\n        border-radius: 12px;\r\n        box-shadow: 0 2px 8px 2px rgba(0,0,0,0.1);\r\n        background-color: #fff;\r\n        cursor: pointer;\r\n        &:hover\r\n          box-shadow: 0 2px 12px 4px rgba(0,0,0,0.1);\r\n          .order-title\r\n            .iconfont.delete\r\n              display: block;\r\n        .order-title\r\n          margin-bottom: 24px;\r\n          font-size: 12px;\r\n          font-weight: 700;\r\n          color: #333;\r\n          line-height: 48px;\r\n          border-bottom: 1px solid #b7bbbf;\r\n          .iconfont\r\n            margin-right: 5px;\r\n            color: #f01414;\r\n            &.delete\r\n              display: none;\r\n              float: right;\r\n              color: #93999f;\r\n          .order-time\r\n            margin-left: 25px;\r\n            color: #93999f;\r\n        .order-list-box\r\n          display: flex;\r\n          align-items: flex-start;\r\n          justify-content: space-between;\r\n          position: relative;\r\n          dl\r\n            flex: 1;\r\n            border-right: 1px solid #d9dde1;\r\n            .order-content\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: space-between;\r\n              margin-bottom: 24px;\r\n              padding-bottom: 24px;\r\n              border-bottom: 1px solid #d9dde1;\r\n              &:last-child\r\n                border-bottom: none;\r\n                margin-bottom: 0px;\r\n                padding-bottom: 0px;\r\n              .img-box\r\n                flex: 0 0 160px;\r\n                width: 160px;\r\n              .order-name-box\r\n                flex: 1;\r\n                margin-left: 20px;\r\n                text-align: left;\r\n                height: 90px;\r\n                .order-name\r\n                  margin-bottom: 8px;\r\n                  color: #07111b;\r\n                  line-height: 24px;\r\n                  font-size: 14px;\r\n                .order-real-price\r\n                  font-size: 13px;\r\n                  color: #f01414;\r\n          .order-price-box, .order-status-box\r\n            flex: 0 0 200px;\r\n            width: 200px;\r\n            text-align: left;\r\n            font-size: 12px;\r\n            color: #93999f;\r\n            & > p\r\n              line-height: 24px;\r\n          .order-price-box\r\n            margin-right: 200px;\r\n            padding-top: 10px;\r\n            padding-left: 20px;\r\n            box-sizing: border-box;\r\n            .old\r\n              text-decoration: line-through;\r\n            .real\r\n              color: #f01414;\r\n              & > span\r\n                margin-top: 20px;\r\n                margin-left: 20px;\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                font-size: 16px;\r\n          .order-status-box\r\n            padding-top: 20px;\r\n            text-align: center;\r\n            box-sizing: border-box;\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            border-left: 1px solid #d9dde1;\r\n            .order-status\r\n              font-size: 14px;\r\n              color: #4d555d;\r\n            .order-pay-btn\r\n              margin: 0px auto 5px;\r\n              width:120px;\r\n              height:36px;\r\n              border-radius: 18px;\r\n              background-color: #f01414;\r\n              color: #fff;\r\n              text-align: center;\r\n              line-height: 36px;\r\n</style>\r\n"]}]}