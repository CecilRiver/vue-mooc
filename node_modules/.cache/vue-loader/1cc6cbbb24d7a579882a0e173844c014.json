{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\order\\TaskDetails.vue?vue&type=style&index=0&id=4d533070&scoped=true&lang=css&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\order\\TaskDetails.vue","mtime":1700131302795},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.task-details {\r\n  margin: 20px;\r\n}\r\n\r\n.page-title {\r\n  font-size: 24px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.task-id {\r\n  font-size: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.details-box {\r\n  border: 1px solid #ccc;\r\n  padding: 15px;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  align-items: baseline; /* 调整为baseline以确保label和content对齐 */\r\n}\r\n\r\n.detail-label {\r\n  font-weight: bold;\r\n  margin-right: 1px;\r\n}\r\n\r\n.detail-content {\r\n  font-size: 16px;\r\n  margin-bottom: 1px;\r\n}\r\n\r\n.long-text {\r\n  white-space: pre-line; /* 防止提交内容过长时换行 */\r\n  line-height: 1.5; /* 调整行距 */\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  align-items: baseline;\r\n  margin-bottom: 5px; /* 减小间距，可以根据需要进行调整 */\r\n}\r\n\r\n.detail-label {\r\n  font-weight: bold;\r\n  margin-right: 10px;\r\n  margin-bottom: 2px; /* 减小间距，可以根据需要进行调整 */\r\n}\r\n\r\n.detail-content {\r\n  font-size: 16px;\r\n  margin-bottom: 2px; /* 减小间距，可以根据需要进行调整 */\r\n  flex: 3;\r\n}\r\n\r\n/* 添加样式 */\r\n.submit-button {\r\n  background-color: #4CAF50; /* 设置背景颜色 */\r\n  color: white; /* 设置文字颜色 */\r\n  padding: 10px 20px; /* 设置内边距 */\r\n  font-size: 16px; /* 设置文字大小 */\r\n  border: none; /* 移除边框 */\r\n  border-radius: 5px; /* 设置边框圆角 */\r\n  cursor: pointer; /* 添加鼠标悬停效果 */\r\n}\r\n\r\n.submit-button:hover {\r\n  background-color: #45a049; /* 悬停时的背景颜色 */\r\n}\r\n\r\n\r\n",{"version":3,"sources":["TaskDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2QA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"TaskDetails.vue","sourceRoot":"src/pages/order","sourcesContent":["<template>\r\n  <div class=\"task-details\">\r\n    <h1 class=\"page-title\">作业互评页面</h1>\r\n    <!-- <p class=\"task-id\">任务ID: {{ internalTaskId }}</p> -->\r\n\r\n    <div v-if=\"assignments\" class=\"details-box assignment-details\">\r\n      <h2 class=\"section-title\">作业详情</h2>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">作业标题:</label>\r\n        <p class=\"detail-content\">{{ assignments.title }}</p>\r\n      </div>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">作业描述:</label>\r\n        <p class=\"detail-content\">{{ assignments.description }}</p>\r\n      </div>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">截止日期:</label>\r\n        <p class=\"detail-content\">{{ assignments.dueDate }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"submissions\" class=\"details-box submission-details\">\r\n      <h2 class=\"section-title\">提交详情</h2>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">提交内容:</label>\r\n        <p class=\"detail-content long-text\">{{ submissions.content }}</p>\r\n      </div>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">提交日期:</label>\r\n        <p class=\"detail-content\">{{ submissions.submissionDate }}</p>\r\n      </div>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">相似度得分:</label>\r\n        <p class=\"detail-content\">{{ submissions.similarityScore }}</p>\r\n      </div>\r\n      <!-- <div class=\"detail-item\">\r\n        <label class=\"detail-label\">初步评分:</label>\r\n        <p class=\"detail-content\">{{ submissions.preliminaryScore }}</p>\r\n      </div> -->\r\n    </div>\r\n\r\n    <div v-if=\"evaluationRules\" class=\"details-box evaluation-rules\">\r\n      <h2 class=\"section-title\">评估规则</h2>\r\n      <div class=\"detail-item\">\r\n        <label class=\"detail-label\">评估规则描述:</label>\r\n        <p class=\"detail-content\">{{ evaluationRules.ruleDescription }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"details-box evaluation-rules\">\r\n    <h2 class=\"section-title\">请打分：</h2>\r\n     <input type=\"number\" v-model=\"star\" min=\"1\" max=\"100\" :style=\"{ color: 'red', fontWeight: 'bold' }\" />\r\n      <!-- <AwesomeVueStarRating \r\n        :star=\"this.star\" \r\n        :disabled=\"this.disabled\" \r\n        :maxstars=\"this.maxstars\" \r\n        :starsize=\"this.starsize\" \r\n        :hasresults=\"this.hasresults\" \r\n        :hasdescription=\"this.hasdescription\" \r\n        :ratingdescription=\"this.ratingdescription\"  /> -->\r\n    </div>\r\n\r\n    <div class=\"edit_container\">\r\n        <quill-editor \r\n            v-model=\"content\" \r\n            ref=\"myQuillEditor\" \r\n            :options=\"editorOption\" \r\n            @blur=\"onEditorBlur($event)\" @focus=\"onEditorFocus($event)\"\r\n            @change=\"onEditorChange($event)\">\r\n        </quill-editor>\r\n    </div>\r\n    <br>\r\n  <!-- 模板中添加提交按钮 -->\r\n     <button @click=\"submitEditorContent\" class=\"submit-button\">提交</button>\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport axios from 'utils/axios.js'\r\nimport AwesomeVueStarRating from \"awesome-vue-star-rating\";\r\nimport Qs from 'qs'\r\n\r\n\r\n//引入富文本编辑器组件\r\nimport {quillEditor} from 'vue-quill-editor';\r\nimport 'quill/dist/quill.core.css';\r\nimport 'quill/dist/quill.snow.css';\r\nimport 'quill/dist/quill.bubble.css';\r\n\r\n\r\nexport default {\r\n  components: {\r\n    quillEditor,\r\n    AwesomeVueStarRating,\r\n  },\r\n  props: ['taskId'],\r\n  data() {\r\n    return {\r\n      star: 50,\r\n        star2: 4,\r\n        ratingdescription: [\r\n        {\r\n            text: \"Poor\",\r\n            class: \"star-poor\",\r\n        },\r\n        {\r\n            text: \"Below Average\",\r\n            class: \"star-belowAverage\",\r\n        },\r\n        {\r\n            text: \"Average\",\r\n            class: \"star-average\",\r\n        },\r\n        {\r\n            text: \"Good\",\r\n            class: \"star-good\",\r\n        },\r\n        {\r\n            text: \"Excellent\",\r\n            class: \"star-excellent\",\r\n        },\r\n        ],\r\n        ratingdescription2: [\r\n        {\r\n            text: \"I hate it\",\r\n            class: \"star-poor\",\r\n        },\r\n        {\r\n            text: \"I dont like it\",\r\n            class: \"star-belowAverage\",\r\n        },\r\n        {\r\n            text: \"Its Okay\",\r\n            class: \"star-average\",\r\n        },\r\n        {\r\n            text: \"I like it\",\r\n            class: \"star-good\",\r\n        },\r\n        {\r\n            text: \"I Love it\",\r\n            class: \"star-excellent\",\r\n        },\r\n        ],\r\n        hasresults: true,\r\n        hasdescription: true,\r\n        starsize: \"lg\", //[xs,lg,1x,2x,3x,4x,5x,6x,7x,8x,9x,10x],\r\n        maxstars: 5,\r\n        disabled: false,\r\n        hasresults2: true,\r\n        hasdescription2: true,\r\n        starsize2: \"lg\", //[xs,lg,1x,2x,3x,4x,5x,6x,7x,8x,9x,10x],\r\n        maxstars2: 5,\r\n        disabled2: false,\r\n        starsize3: \"xs\",\r\n\r\n\r\n      selectedStars: 0, // 存储当前选中的星星数量\r\n\r\n      internalTaskId: null, // 使用一个内部变量来保存 taskId 的值\r\n      assignments: null,\r\n      submissions: null,\r\n      evaluationRules: null,\r\n      content: `请认真评阅`,\r\n      editorOption:{\r\n        placeholder: \"请在这里输入\",\r\n              modules:{\r\n                toolbar:[\r\n                          ['bold', 'italic', 'underline', 'strike'],    //加粗，斜体，下划线，删除线\r\n                          ['blockquote', 'code-block'],     //引用，代码块\r\n                          [{ 'header': 1 }, { 'header': 2 }],        // 标题，键值对的形式；1、2表示字体大小\r\n                          [{ 'list': 'ordered'}, { 'list': 'bullet' }],     //列表\r\n                          [{ 'script': 'sub'}, { 'script': 'super' }],   // 上下标\r\n                          [{ 'indent': '-1'}, { 'indent': '+1' }],     // 缩进\r\n                          [{ 'direction': 'rtl' }],             // 文本方向\r\n                          [{ 'size': ['small', false, 'large', 'huge'] }], // 字体大小\r\n                          [{ 'header': [1, 2, 3, 4, 5, 6, false] }],     //几级标题\r\n                          [{ 'color': [] }, { 'background': [] }],     // 字体颜色，字体背景颜色\r\n                          [{ 'font': [] }],     //字体\r\n                          [{ 'align': [] }],    //对齐方式\r\n                          ['clean'],    //清除字体样式\r\n                          ['image','video']    //上传图片、上传视频\r\n                          ]\r\n                      }\r\n\r\n      },\r\n\r\n      \r\n    };\r\n  },\r\n  mounted() {\r\n    // 使用 $route.params 获取路由参数中的 id\r\n    const routeId = this.$route.params.id;\r\n    console.log('从路由中获取的任务ID:', routeId);\r\n\r\n    // 将路由参数中的 id 赋值给内部变量\r\n    this.internalTaskId = this.taskId || routeId;\r\n    console.log('最终任务ID:', this.internalTaskId);\r\n\r\n    if (this.internalTaskId !== undefined) {\r\n      this.loadData();\r\n    } else {\r\n      console.error('Task ID is undefined.');\r\n    }\r\n  },\r\n  methods: {\r\n\r\n\r\n     // 提交富文本编辑器内容\r\n  submitEditorContent() {\r\n  \r\n    const userInfo = this.$store.getters.userInfo;\r\n    const params ={\r\n      submissionId: this.internalTaskId,\r\n      reviewerId: userInfo[0].userId ,\r\n      score : this.star,\r\n      feedback:this.content\r\n    }\r\n    axios.defaults.withCredentials = false;// Cookie跨域\r\n    axios.post(`http://localhost:8000/peerevaluation/peerreviews/createReview`,Qs.stringify(params))\r\n    .then(response =>{\r\n      const{code,msg} = response\r\n          if(code === 0){\r\n            this.dialogVisible = false\r\n            this.$message.success(msg)    \r\n          }\r\n    })\r\n  },\r\n    loadData() {\r\n      axios.defaults.withCredentials = false;// Cookie跨域\r\n      axios.get(`http://localhost:11000/work/submissions/info/${this.internalTaskId}`)\r\n        .then(response => {\r\n          const data = response.data;\r\n          this.assignments = data.assignments;\r\n          this.submissions = data.submissions;\r\n          this.evaluationRules = data.evaluationRules;\r\n        })\r\n        .catch(error => {\r\n          console.log('Error fetching data:', error);\r\n        });\r\n    },\r\n    onEditorReady(editor) { // 准备编辑器\r\n    \r\n  },\r\n  onEditorBlur(){}, // 失去焦点事件\r\n  onEditorFocus(){}, // 获得焦点事件\r\n  onEditorChange(){}, // 内容改变事件\r\n  },\r\n  computed: {\r\n        editor() {\r\n            return this.$refs.myQuillEditor.quill;\r\n        },\r\n    },\r\n\r\n  created() {\r\n    // 监听AwesomeVueStarRating组件的input事件\r\n    this.$on('input', this.handleStarChange);\r\n  },\r\n    \r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.task-details {\r\n  margin: 20px;\r\n}\r\n\r\n.page-title {\r\n  font-size: 24px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.task-id {\r\n  font-size: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.details-box {\r\n  border: 1px solid #ccc;\r\n  padding: 15px;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  align-items: baseline; /* 调整为baseline以确保label和content对齐 */\r\n}\r\n\r\n.detail-label {\r\n  font-weight: bold;\r\n  margin-right: 1px;\r\n}\r\n\r\n.detail-content {\r\n  font-size: 16px;\r\n  margin-bottom: 1px;\r\n}\r\n\r\n.long-text {\r\n  white-space: pre-line; /* 防止提交内容过长时换行 */\r\n  line-height: 1.5; /* 调整行距 */\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  align-items: baseline;\r\n  margin-bottom: 5px; /* 减小间距，可以根据需要进行调整 */\r\n}\r\n\r\n.detail-label {\r\n  font-weight: bold;\r\n  margin-right: 10px;\r\n  margin-bottom: 2px; /* 减小间距，可以根据需要进行调整 */\r\n}\r\n\r\n.detail-content {\r\n  font-size: 16px;\r\n  margin-bottom: 2px; /* 减小间距，可以根据需要进行调整 */\r\n  flex: 3;\r\n}\r\n\r\n/* 添加样式 */\r\n.submit-button {\r\n  background-color: #4CAF50; /* 设置背景颜色 */\r\n  color: white; /* 设置文字颜色 */\r\n  padding: 10px 20px; /* 设置内边距 */\r\n  font-size: 16px; /* 设置文字大小 */\r\n  border: none; /* 移除边框 */\r\n  border-radius: 5px; /* 设置边框圆角 */\r\n  cursor: pointer; /* 添加鼠标悬停效果 */\r\n}\r\n\r\n.submit-button:hover {\r\n  background-color: #45a049; /* 悬停时的背景颜色 */\r\n}\r\n\r\n\r\n</style>"]}]}