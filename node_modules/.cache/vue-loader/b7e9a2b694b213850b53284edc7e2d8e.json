{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\order\\coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\order\\coupon.vue","mtime":1698894932464},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getCouponList } from 'api/order.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      currentIndex: 0,\r\n      navList: [],\r\n      couponList: [],\r\n    }\r\n  },\r\n  created () {\r\n    this.navList = [\r\n      { title: '未使用', status: 0},\r\n      { title: '已使用', status: 1},\r\n      { title: '已过期', status: 2}\r\n    ]\r\n  },\r\n  mounted () {\r\n    this.getCurponListData()\r\n  },\r\n  methods: {\r\n    // 选项卡点击\r\n    handleNavClick (item, index) {\r\n      this.currentIndex = index\r\n      this.getCurponListData()\r\n    },\r\n    // 获取用户优惠券信息\r\n    getCurponListData () {\r\n      const params = {\r\n        status: this.currentStatus\r\n      }\r\n      getCouponList(params).then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.couponList = data\r\n        } else {\r\n          this.couponList = []\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.couponList = []\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 根据状态获取优惠券的背景图片\r\n    getBackgroundImage (status) {\r\n      let url = ''\r\n      let height = 0\r\n      switch (status) {\r\n        case 0:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_bg.png'\r\n          height = 144\r\n          break\r\n        case 1:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_used_bg.png'\r\n          height = 184\r\n          break\r\n        case 2:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_overdue.png'\r\n          height = 144\r\n          break\r\n      }\r\n      return {\r\n        'background-image': `url('${url}')`,\r\n        'height': `${height}px`\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    currentStatus () {\r\n      return this.navList[this.currentIndex].status\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["coupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"coupon.vue","sourceRoot":"src/pages/order","sourcesContent":["<template>\r\n  <div class=\"curpon\">\r\n    <dl class=\"curpon-tab\">\r\n      <dt>我的优惠券</dt>\r\n      <dd\r\n        v-for=\"(item,index) in navList\"\r\n        :key=\"item.id\"\r\n        :class=\"{active: currentIndex == index}\"\r\n        @click=\"handleNavClick(item, index)\"\r\n      >\r\n        <i v-if=\"item.type==4\" class=\"iconfont\">&#xe622;</i>{{ item.title }}\r\n      </dd>\r\n    </dl>\r\n    <ul class=\"curpon-list\">\r\n      <li\r\n        v-for=\"(item,index) in couponList\"\r\n        :key=\"index\"\r\n        class=\"curpon-item\"\r\n        :style=\"getBackgroundImage(item.status.code)\"\r\n      >\r\n        <p class=\"curpon-price-box\">\r\n          <span class=\"price\" :class=\"{'is-enable': item.status.code == 0}\">¥ {{ item.number }}</span>\r\n          <span class=\"condition\">\r\n            <template v-if=\"item.limit <= 0\">\r\n              无门槛\r\n            </template>\r\n            <template v-else>\r\n              满 ¥{{ item.limit }} 可用\r\n            </template>\r\n          </span>\r\n        </p>\r\n        <p class=\"range\">\r\n          适用于：{{ item.range.text }}\r\n        </p>\r\n        <p class=\"effective\">\r\n          有效期：{{ item.starttime }}-{{ item.endtime }}\r\n        </p>\r\n        <template v-if=\"item.status.code==1\">\r\n          <p class=\"order\">\r\n            订单号：{{ item.orderid }}\r\n          </p>\r\n          <p class=\"use-time\">\r\n            使用日期：{{ item.usetime }}\r\n          </p>\r\n        </template>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getCouponList } from 'api/order.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      currentIndex: 0,\r\n      navList: [],\r\n      couponList: [],\r\n    }\r\n  },\r\n  created () {\r\n    this.navList = [\r\n      { title: '未使用', status: 0},\r\n      { title: '已使用', status: 1},\r\n      { title: '已过期', status: 2}\r\n    ]\r\n  },\r\n  mounted () {\r\n    this.getCurponListData()\r\n  },\r\n  methods: {\r\n    // 选项卡点击\r\n    handleNavClick (item, index) {\r\n      this.currentIndex = index\r\n      this.getCurponListData()\r\n    },\r\n    // 获取用户优惠券信息\r\n    getCurponListData () {\r\n      const params = {\r\n        status: this.currentStatus\r\n      }\r\n      getCouponList(params).then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.couponList = data\r\n        } else {\r\n          this.couponList = []\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.couponList = []\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 根据状态获取优惠券的背景图片\r\n    getBackgroundImage (status) {\r\n      let url = ''\r\n      let height = 0\r\n      switch (status) {\r\n        case 0:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_bg.png'\r\n          height = 144\r\n          break\r\n        case 1:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_used_bg.png'\r\n          height = 184\r\n          break\r\n        case 2:\r\n          url = 'https://order.imooc.com/static/module/coupon/img/coupons_overdue.png'\r\n          height = 144\r\n          break\r\n      }\r\n      return {\r\n        'background-image': `url('${url}')`,\r\n        'height': `${height}px`\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    currentStatus () {\r\n      return this.navList[this.currentIndex].status\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .curpon\r\n    .curpon-tab\r\n      dt, dd\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n      dt\r\n        position: relative;\r\n        margin-right: 20px;\r\n        padding-right: 20px;\r\n        font-size: 16px;\r\n        color: #07111b;\r\n        line-height: 32px;\r\n        font-weight: 700;\r\n        &::after\r\n          content: '';\r\n          position: absolute;\r\n          right: 0;\r\n          top: 6px;\r\n          width: 1px;\r\n          height: 20px;\r\n          background-color: #d9dde1;\r\n      dd\r\n        padding: 10px 40px;\r\n        font-size:12px;\r\n        color: #5e5e5e;\r\n        cursor: pointer;\r\n        &.active\r\n          background-color: #4d555d;\r\n          border-radius: 16px;\r\n          color: #fff;\r\n    .curpon-list\r\n      margin-top: 15px;\r\n      display: flex;\r\n      align-items: center;\r\n      flex-wrap: wrap;\r\n      .curpon-item\r\n        flex: 0 0 320px;\r\n        margin-right: 10px;\r\n        margin-bottom: 15px;\r\n        padding: 24px 32px;\r\n        width: 320px;\r\n        background-color: #fff;\r\n        box-shadow: 0 8px 16px 0 rgba(7,17,27,.2);\r\n        border-radius: 12px;\r\n        background-repeat: no-repeat;\r\n        background-size: 100% 100%;\r\n        box-sizing: border-box;\r\n        cursor: pointer;\r\n        & > p:not(:first-child)\r\n          font-size: 12px;\r\n          color: #93999f;\r\n          line-height: 24px;\r\n        &:nth-child(3n)\r\n          margin-right: 0;\r\n        .curpon-price-box\r\n          margin-bottom: 8px;\r\n          line-height: 40px;\r\n          color: #93999f;\r\n          & > span\r\n            display: inline-block;\r\n            vertical-align: top;\r\n            font-weight: 700;\r\n          .price\r\n            margin-right: 12px;\r\n            font-size: 36px;\r\n            &.is-enable\r\n              color: #f56108;\r\n          .condition\r\n            font-size: 14px;\r\n</style>\r\n"]}]}