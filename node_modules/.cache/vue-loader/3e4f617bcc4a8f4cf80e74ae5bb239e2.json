{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\user\\address.vue?vue&type=style&index=0&id=adea3f98&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\user\\address.vue","mtime":1698894932467},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\stylus-loader\\index.js","mtime":1698895086074},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '~assets/stylus/mixin.styl';\r\n.address-container\r\n  .address-title\r\n    margin-bottom: 24px;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #d0d6d9;\r\n    font-size: 16px;\r\n    color: #333;\r\n    font-weight: 700;\r\n  .address-list\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    .address-item\r\n      position: relative;\r\n      margin: 0 10px 20px;\r\n      padding: 24px;\r\n      width: 275px;\r\n      height: 229px;\r\n      box-sizing: border-box;\r\n      border: 1px solid #d0d6d9;\r\n      overflow: hidden;\r\n      &:hover\r\n        .address-btn\r\n          display: block;\r\n      .add-address\r\n        position: absolute;\r\n        top: 40%;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        text-align: center;\r\n        .iconfont\r\n          display: inline-block;\r\n          width: 50px;\r\n          height: 50px;\r\n          border-radius: 50%;\r\n          background-color: #d9dde1;\r\n          color: #fff;\r\n          line-height: 50px;\r\n          font-size: 35px;\r\n          cursor: pointer;\r\n        .add-text \r\n          margin-top: 18px;\r\n          font-size: 14px;\r\n          color: #4d555d;\r\n      & > p\r\n        font-size: 14px;\r\n        color: #4d555d;\r\n        line-height: 24px;\r\n        multline-ellipsis(2);\r\n        &.name\r\n          margin-bottom: 24px;\r\n          font-size: 16px;\r\n          color: #333;\r\n          font-weight: 700;\r\n      .address-btn\r\n        display: none;\r\n        position: absolute;\r\n        bottom: 10px;\r\n        right: 10px;\r\n        & > span\r\n          display: inline-block;\r\n          margin: 0 10px;\r\n          color: #f01414;\r\n          font-size: 12px;\r\n          cursor: pointer;\r\n          line-height: 24px;\r\n          &.default\r\n            margin-right: 60px;\r\n      .default-icon\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        padding: 0 40px;\r\n        height: 30px;\r\n        line-height: 44px;\r\n        background-color: #00b43c;\r\n        transform: rotate(45deg) translate(27px, -32px);\r\n        transform-origin: center;\r\n        color: #fff;\r\n        text-align: center;\r\n        font-size: 12px;\r\n  >>> .mooc-dialog\r\n    .mooc-dialog-body\r\n      padding: 30px 30px 30px 20px;\r\n",{"version":3,"sources":["address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"address.vue","sourceRoot":"src/pages/user","sourcesContent":["<template>\r\n  <div class=\"address-container\">\r\n    <h2 class=\"address-title\">\r\n      收货地址\r\n    </h2>\r\n    <dl class=\"address-list\">\r\n      <dd class=\"address-item\">\r\n        <div class=\"add-address\" @click=\"handleAddClick\">\r\n          <i class=\"iconfont\">&#xeaf3;</i>\r\n          <p class=\"add-text\">\r\n            添加新地址\r\n          </p>\r\n        </div>\r\n      </dd>\r\n      <dd v-for=\"(item,index) in addressList\" :key=\"index\" class=\"address-item\">\r\n        <p class=\"name\">\r\n          {{ item.name }}\r\n        </p>\r\n        <p>电话：{{ item.phone }}</p>\r\n        <p>地区：{{ item.area }}</p>\r\n        <p>地址：{{ item.address }}</p>\r\n        <p>邮编：{{ item.postcode }}</p>\r\n        <div class=\"address-btn\">\r\n          <span v-if=\"!item.isDefault\" class=\"default\" @click=\"handleDefaultClick(item)\">设为默认地址</span>\r\n          <span @click=\"handleEditClick(item)\">修改</span>\r\n          <span @click=\"handleDeleteClick(item)\">删除</span>\r\n        </div>\r\n        <div v-if=\"item.isDefault\" class=\"default-icon\">\r\n          默认\r\n        </div>\r\n      </dd>\r\n    </dl>\r\n\r\n    <mooc-dialog :title=\"title\" :visible.sync=\"dialogVisible\" width=\"500px\">\r\n      <el-form ref=\"editForm\" :model=\"editForm\" :rules=\"rules\" label-width=\"80px\" label-position=\"right\">\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" placeholder=\"请输入收件人姓名\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\" prop=\"phone\">\r\n          <el-input v-model=\"editForm.phone\" placeholder=\"请输入收件人手机号\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"区域\" prop=\"area\">\r\n          <el-input v-model=\"editForm.area\" placeholder=\"请输入区域\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"详细地址\" prop=\"address\">\r\n          <el-input v-model=\"editForm.address\" placeholder=\"请输入详细收货地址\" clearable />\r\n        </el-form-item>\r\n        <el-form-item label=\"邮政编码\" prop=\"postcode\">\r\n          <el-input v-model=\"editForm.postcode\" placeholder=\"请输入邮政编码\" clearable />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\">\r\n        <mooc-button size=\"small\" @click=\"dialogVisible = false\">\r\n          取消\r\n        </mooc-button>\r\n        <mooc-button type=\"primary\" size=\"small\" @click=\"handleValidateForm\">\r\n          确定\r\n        </mooc-button>\r\n      </div>\r\n    </mooc-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getUserAddresss, createUserAddress, updateUserAddress, deleteUserAddress, defaultUserAddress } from 'api/address.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    const rules = {\r\n      name: [\r\n        { required: true, message: '请输入收件人姓名', trigger: 'blur' }\r\n      ],\r\n      phone: [\r\n        { required: true, message: '请输入收件人手机号', trigger: 'blur' }\r\n      ],\r\n      area: [\r\n        { required: true, message: '请输入区域', trigger: 'blur' }\r\n      ],\r\n      address: [\r\n        { required: true, message: '请输入详细收件地址', trigger: 'blur' }\r\n      ],\r\n      postcode: [\r\n        { required: true, message: '请输入邮政编码', trigger: 'blur' }\r\n      ]\r\n    }\r\n    return {\r\n      rules: rules,\r\n      dialogVisible: false,\r\n      addressList: [],\r\n      editForm: {\r\n        id: '',\r\n        name: '',\r\n        phone: '',\r\n        area: '',\r\n        address: '',\r\n        postcode: ''\r\n      }\r\n    };\r\n  },\r\n  mounted () {\r\n    this.getAddressData()\r\n  },\r\n  methods: {\r\n    // 新增收货地址\r\n    handleAddClick () {\r\n      this.dialogVisible = true\r\n      this.editForm = {\r\n        id: '',\r\n        name: '汪图南',\r\n        phone: '18277776666',\r\n        area: '广东省广州市',\r\n        address: '天河区xxx路xxx号xxx公司',\r\n        postcode: '000000'\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.editForm.resetFields()\r\n      })\r\n    },\r\n    // 修改收货地址\r\n    handleEditClick (item) {\r\n      this.dialogVisible = true\r\n      this.editForm = Object.assign({}, item)\r\n      this.$nextTick(() => {\r\n        this.$refs.editForm.resetFields()\r\n      })\r\n    },\r\n    // 删除收货地址\r\n    handleDeleteClick (item) {\r\n      this.$confirm('此操作将删除该收件地址，是否确定？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const params = {\r\n          id: item.id\r\n        }\r\n        deleteUserAddress(params).then(res => {\r\n          const { code, msg } = res\r\n          if (code === ERR_OK) {\r\n            this.$message.success(msg || '删除成功')\r\n            this.getAddressData()\r\n          } else {\r\n            this.$message.error(msg)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    // 默认收获地址\r\n    handleDefaultClick (item) {\r\n      const params = {\r\n        id: item.id\r\n      }\r\n      defaultUserAddress(params).then(res => {\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.$message.success(msg)\r\n          this.getAddressData()\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 校验收获地址\r\n    handleValidateForm () {\r\n      this.$refs.editForm.validate(valid => {\r\n        if (valid) {\r\n          this.handleSubmitClick()\r\n        }\r\n      })\r\n    },\r\n    // 确认收货地址\r\n    handleSubmitClick () {\r\n      const func = this.editForm.id ? updateUserAddress : createUserAddress\r\n      func(this.editForm).then(res => {\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.$message.success(msg || '操作成功')\r\n          this.dialogVisible = false\r\n          this.getAddressData()\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取收货地址\r\n    getAddressData () {\r\n      getUserAddresss().then(res => {\r\n        const { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.addressList = data\r\n        } else {\r\n          this.addressList = []\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.addressList = []\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    title () {\r\n      return this.editForm.id ? '编辑收件地址' : '新增收件地址'\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~assets/stylus/mixin.styl';\r\n.address-container\r\n  .address-title\r\n    margin-bottom: 24px;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #d0d6d9;\r\n    font-size: 16px;\r\n    color: #333;\r\n    font-weight: 700;\r\n  .address-list\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    .address-item\r\n      position: relative;\r\n      margin: 0 10px 20px;\r\n      padding: 24px;\r\n      width: 275px;\r\n      height: 229px;\r\n      box-sizing: border-box;\r\n      border: 1px solid #d0d6d9;\r\n      overflow: hidden;\r\n      &:hover\r\n        .address-btn\r\n          display: block;\r\n      .add-address\r\n        position: absolute;\r\n        top: 40%;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        text-align: center;\r\n        .iconfont\r\n          display: inline-block;\r\n          width: 50px;\r\n          height: 50px;\r\n          border-radius: 50%;\r\n          background-color: #d9dde1;\r\n          color: #fff;\r\n          line-height: 50px;\r\n          font-size: 35px;\r\n          cursor: pointer;\r\n        .add-text \r\n          margin-top: 18px;\r\n          font-size: 14px;\r\n          color: #4d555d;\r\n      & > p\r\n        font-size: 14px;\r\n        color: #4d555d;\r\n        line-height: 24px;\r\n        multline-ellipsis(2);\r\n        &.name\r\n          margin-bottom: 24px;\r\n          font-size: 16px;\r\n          color: #333;\r\n          font-weight: 700;\r\n      .address-btn\r\n        display: none;\r\n        position: absolute;\r\n        bottom: 10px;\r\n        right: 10px;\r\n        & > span\r\n          display: inline-block;\r\n          margin: 0 10px;\r\n          color: #f01414;\r\n          font-size: 12px;\r\n          cursor: pointer;\r\n          line-height: 24px;\r\n          &.default\r\n            margin-right: 60px;\r\n      .default-icon\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        padding: 0 40px;\r\n        height: 30px;\r\n        line-height: 44px;\r\n        background-color: #00b43c;\r\n        transform: rotate(45deg) translate(27px, -32px);\r\n        transform-origin: center;\r\n        color: #fff;\r\n        text-align: center;\r\n        font-size: 12px;\r\n  >>> .mooc-dialog\r\n    .mooc-dialog-body\r\n      padding: 30px 30px 30px 20px;\r\n</style>\r\n"]}]}