{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\user\\information.vue?vue&type=style&index=0&id=2b876d28&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\user\\information.vue","mtime":1699586716660},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\stylus-loader\\index.js","mtime":1698895086074},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.user-information\n  .info-title\n    margin-bottom: 24px;\n    height: 48px;\n    border-bottom: 1px solid #d0d6d9;\n    line-height: 48px;\n    font-size: 16px;\n    font-weight: 700;\n    color: #333;\n    .mooc-button\n      float: right;\n      margin-top: 5px;\n      border: none;\n      font-size: 15px;\n  .info-item\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px;\n    .info-type\n      flex: 0 0 120px;\n      width: 120px;\n      padding: 20px 0;\n      margin-right: 20px;\n      font-size: 14px;\n      color: #07111b;\n      font-weight: 700;\n      background-color: #f3f5f7;\n      text-align: center;\n    .info-content\n      flex: 1;\n      padding: 20px 0;\n      border-bottom: 1px solid #d9dde1;\n      font-size: 14px;\n  >>> .mooc-dialog\n    .mooc-dialog-body\n      padding: 30px 30px 30px 20px;\n",{"version":3,"sources":["information.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"information.vue","sourceRoot":"src/pages/user","sourcesContent":["<template>\r\n  <div class=\"user-information\">\r\n    <dl>\r\n      <dt class=\"info-title\">\r\n        个人信息\r\n        <mooc-button size=\"mini\" round @click=\"handleEditClick\">\r\n          <i class=\"iconfont\">&#xe600;</i>\r\n          编辑\r\n        </mooc-button>\r\n      </dt>\r\n      <dd v-for=\"(item,index) in information\" :key=\"index\" class=\"info-item\">\r\n        <div class=\"info-type\">\r\n          {{ item.type }}\r\n        </div>\r\n        <div class=\"info-content\">\r\n          <template v-if=\"item.type == '性别'\">\r\n            {{ item.value == '男' ? '男' : '女' }}\r\n          </template>\r\n          <template v-else>\r\n            {{ item.value?item.value:'未设置' }}\r\n          </template>\r\n        </div>\r\n      </dd>\r\n    </dl>\r\n\r\n    <!-- 编辑个人信息弹窗 -->\r\n    <mooc-dialog title=\"编辑个人信息\" :visible.sync=\"dialogVisible\" width=\"600px\">\r\n      <el-form ref=\"editForm\" :model=\"editForm\" label-width=\"80px\" label-position=\"rigth\">\r\n        <!-- <el-form-item label=\"昵称\">\r\n          <el-input v-model=\"editForm.nickname\" placeholder=\"请输入昵称\"></el-input>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input v-model=\"editForm.email\" placeholder=\"请输入邮箱\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-radio-group v-model=\"editForm.sex\">\r\n            <el-radio label=\"male\">男</el-radio>\r\n            <el-radio label=\"female\">女</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"个性签名\">\r\n          <el-input v-model=\"editForm.intro\" type=\"textarea\" :autosize=\"{ minRows: 2, maxRows: 4}\" placeholder=\"请输入个性签名\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n        <mooc-button size=\"small\" @click=\"dialogVisible=false\">关闭</mooc-button>\r\n        <mooc-button size=\"small\" type=\"primary\" :disabled=\"isLoading\" @click=\"handleSaveClick\">保存</mooc-button>\r\n      </template>\r\n    </mooc-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { updateUserInfo } from 'api/user.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  props: {\r\n    userinfo: {\r\n      type: Object\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      dialogVisible: false,\r\n      information: [],\r\n      editForm: {\r\n        nickname: '',\r\n        email: '',\r\n        city: '',\r\n        sex: '',\r\n        signature: ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.information = [\r\n      { id: 1, type: '用户名', value: this.userinfo[0].username },\r\n      { id: 2, type: '邮箱', value: this.userinfo[0].email },\r\n      { id: 3, type: '性别', value: this.userinfo[0].sex },\r\n      { id: 4, type: '个性签名', value: this.userinfo[0].intro }\r\n      // { id: 5, type: '城市', value: this.userinfo.city },\r\n    ]\r\n  },\r\n  methods: {\r\n    // 编辑个人信息\r\n    handleEditClick () {\r\n      this.dialogVisible = true\r\n      this.editForm = {\r\n        username: this.userinfo[0].username,\r\n        email: this.userinfo[0].email,\r\n        // city: this.userinfo.city,\r\n        sex: this.userinfo[0].sex,\r\n        intro: this.userinfo[0].intro\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.editForm.resetFields()\r\n      })\r\n    },\r\n    // 保存个人信息\r\n    handleSaveClick () {\r\n      this.isLoading = true\r\n      updateUserInfo(this.editForm).then(res => {\r\n        this.isLoading = false\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.dialogVisible = false\r\n          this.$message.success(msg)\r\n          this.$emit('componentClick', 'userinfo')\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.isLoading = false\r\n        this.$message.error('接口异常')\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    userinfo: {\r\n      handler () {\r\n        this.information = [\r\n          { id: 1, type: '用户名', value: this.userinfo[0].username },\r\n          { id: 2, type: '邮箱', value: this.userinfo[0].email },\r\n          { id: 3, type: '性别', value: this.userinfo[0].sex },\r\n          { id: 4, type: '个性签名', value: this.userinfo[0].intro }\r\n          // { id: 3, type: '城市', value: this.userinfo.city },\r\n\r\n        ]\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .user-information\r\n    .info-title\r\n      margin-bottom: 24px;\r\n      height: 48px;\r\n      border-bottom: 1px solid #d0d6d9;\r\n      line-height: 48px;\r\n      font-size: 16px;\r\n      font-weight: 700;\r\n      color: #333;\r\n      .mooc-button\r\n        float: right;\r\n        margin-top: 5px;\r\n        border: none;\r\n        font-size: 15px;\r\n    .info-item\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 20px;\r\n      .info-type\r\n        flex: 0 0 120px;\r\n        width: 120px;\r\n        padding: 20px 0;\r\n        margin-right: 20px;\r\n        font-size: 14px;\r\n        color: #07111b;\r\n        font-weight: 700;\r\n        background-color: #f3f5f7;\r\n        text-align: center;\r\n      .info-content\r\n        flex: 1;\r\n        padding: 20px 0;\r\n        border-bottom: 1px solid #d9dde1;\r\n        font-size: 14px;\r\n    >>> .mooc-dialog\r\n      .mooc-dialog-body\r\n        padding: 30px 30px 30px 20px;\r\n</style>\r\n"]}]}