{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\question\\index.vue?vue&type=style&index=0&id=d80f2726&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\question\\index.vue","mtime":1698894932465},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\stylus-loader\\index.js","mtime":1698895086074},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~assets/stylus/variables.styl';\n.question\n  padding: 20px 0 50px;\n  .question-header\n    .question-search\n      position: relative;\n      padding-right: 75px;\n      background-color: #fff;\n      border-bottom: 1px solid rgba(7,17,27,0.1);\n      & > img\n        width: 300px;\n        height: 60px;\n      .search-box\n        float: right;\n        position: relative;\n        margin-top: 16px;\n        width: 480px;\n        height: 36px;\n        line-height: 36px;\n        border-radius: 8px;\n        background-color: $border-three-color;\n        & > input\n          padding: 0 60px 0 10px;\n          width: 100%;\n          height: 36px;\n          outline: none;\n          background: none;\n          box-sizing: border-box;\n          color: $font-four-color;\n          font-size: 14px;\n        .iconfont\n          display: inline-block;\n          position: absolute;\n          top: 0;\n          right: 20px;\n          font-size: 20px;\n          font-weight: 700;\n          color: $font-four-color;\n          cursor: pointer;\n      .search-btn\n        position: absolute;\n        right: 0;\n        top: 16px;\n        padding: 7px 16px;\n        background-color: #1fad4e;\n        border-radius: 18px;\n        color: #fff;\n        font-size: 14px;\n        line-height: 24px;\n        cursor: pointer;\n        &:hover\n          background-color: #17823b;\n    .question-nav\n      position: relative;\n      padding: 18px 0;\n      border-bottom: 1px solid rgba(7,17,27,0.1);\n      dt, dd\n        display: inline-block;\n        vertical-align: middle;\n        margin-right: 20px;\n        font-size: 14px;\n        line-height: 24px;\n      dd\n        cursor: pointer;\n        &:last-child\n          float: right;\n          margin-right: 0;\n        &:hover, &.active\n          color: $theme-green-color;\n  .question-content-container\n    margin-top: 30px;\n    .question-list\n      padding: 28px 32px;\n      background-color: #fff;\n      border-radius: 12px;\n      box-shadow: 0 4px 8px 2px rgba(7,17,27,.1)\n      .question-item\n        display: flex;\n        align-items: center;\n        padding: 16px 0;\n        border-bottom: 1px solid rgba(7,17,27,0.1);\n        &:last-child\n          border-bottom: none;\n        .finish\n          flex: 0 0 40px;\n          width: 40px;\n          padding: 8px 0;\n          margin-right: 15px;\n          background-color: rgba(31,173,78,.1);\n          color: #17823b;\n          & > span\n            display: block;\n            text-align: center;\n            line-height: 18px;\n            font-size: 16px;\n            font-weight: 700;\n            &:last-child\n              font-weight: 400;\n              font-size: 14px;\n        .content-box\n          flex: 1;\n          .title\n            margin-bottom: 4px;\n            font-size: 16px;\n            color: $font-first-color;\n            font-weight: 700;\n            line-height: 24px;\n            cursor: pointer;\n            &:hover\n              color: #1fad4e;\n          .tag\n            font-size: 12px;\n            color: $font-four-color;\n            & > img\n              display: inline-block;\n              vertical-align: middle;\n              margin-top: -2px;\n              width: 16px;\n              height: 16px;\n              border-radius: 50%;\n            & > span\n              display: inline-block;\n              vertical-align: middle;\n              &.name\n                padding: 0 10px 0 5px;\n              &.view-box\n                padding-left: 10px;\n                & > i, & > span\n                  display: inline-block;\n                  vertical-align: middle;\n    .list-empty\n      padding: 10px 0;\n      text-align: center;\n      font-size: 14px;\n      color: $theme-red-color;\n   .label-container\n      padding-left: 20px;\n     .label-group\n      display: inline-block;\n      vertical-align: top;\n      margin-bottom: 18px;\n      width: 250px;\n      &:nth-child(2n + 1)\n        margin-right: 20px;\n      .label-group-title\n        margin-bottom: 18px;\n        font-size: 14px;\n        color: $theme-green-color;\n        font-weight: bold;\n      .label-item\n        display: inline-block;\n        vertical-align: middle;\n        margin-right: 8px;\n        margin-bottom: 8px;\n        padding: 8px 16px;\n        border-radius: 16px;\n        background-color: rgba(28,31,33,.08);\n        line-height: 16px;\n        cursor: pointer;\n        transition: all 0.3s;\n        &:hover, &.is-active\n          color: #fff;\n          background-color: $theme-green-color;\n  >>> .mooc-dialog\n    .mooc-dialog-body\n      padding-top: 20px;\n    .mooc-dialog-footer\n      text-align: center;\n      .mooc-button\n        width: 200px;\n        border-radius: 24px;\n    .el-scrollbar\n      height: 360px;\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/question","sourcesContent":["<template>\r\n  <div class=\"question\">\r\n    <!-- 头部 -->\r\n    <div class=\"question-header m-center\">\r\n      <div class=\"question-search\">\r\n        <img src=\"https://www.imooc.com/static/img/wenda/wenda-logo.png\" alt=\"\">\r\n        <div class=\"search-box\">\r\n          <input type=\"text\" placeholder=\"请输入你的问题\">\r\n          <i class=\"iconfont\">&#xe63c;</i>\r\n        </div>\r\n        <div class=\"search-btn\">\r\n          提问\r\n        </div>\r\n      </div>\r\n      <div v-if=\"userInfo.id\" class=\"question-nav\">\r\n        <dl>\r\n          <dt>我的关注：</dt>\r\n          <dd\r\n            v-for=\"(item, index) in followList\"\r\n            :key=\"index\"\r\n            :class=\"{\r\n              active: currentIndex == index\r\n            }\"\r\n            @click=\"handleLikeClick(item, index)\"\r\n          >\r\n            {{ item.title }}\r\n          </dd>\r\n          <dd @click=\"handleLabelManageClick\">标签管理</dd>\r\n        </dl>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 列表部分 -->\r\n    <div class=\"m-center\">\r\n      <div class=\"question-content-container\">\r\n        <div class=\"question-list\">\r\n          <ul v-if=\"questionList && questionList.length\">\r\n            <li v-for=\"(item, index) in questionList\" :key=\"index\" class=\"question-item\">\r\n              <div class=\"finish\">\r\n                <span v-if=\"item.isResolve\" class=\"iconfont\">&#xe786;</span>\r\n                <span>{{ item.answers }}</span>\r\n              </div>\r\n              <div class=\"content-box\">\r\n                <h3 class=\"title\">\r\n                  {{ item.title }}\r\n                </h3>\r\n                <p class=\"tag\">\r\n                  <img :src=\"item.icon\" alt=\"\">\r\n                  <span\r\n                    v-for=\"(tag, index) in item.tags\"\r\n                    :key=\"index\"\r\n                    class=\"name\"\r\n                  >{{ tag }}</span>\r\n                  <span class=\"view-box\">\r\n                    <i class=\"iconfont\">&#xe681;</i>\r\n                    <span class=\"view-number\">{{ item.views }}</span>\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n          <empty v-else message=\"暂无相关猿问数据\"></empty>\r\n        </div>\r\n      </div>\r\n      <pagination :size=\"size\" :total=\"total\" :page.sync=\"page\" @change=\"handlePaginationChange\" />\r\n    </div>\r\n\r\n    <!-- 标签管理弹出 -->\r\n    <mooc-dialog title=\"选择感兴趣的标签\" :visible.sync=\"dialogVisible\" width=\"600px\">\r\n      <el-scrollbar>\r\n        <div class=\"label-container\">\r\n          <dl\r\n            v-for=\"(type, index) in labelList\"\r\n            :key=\"index\"\r\n            class=\"label-group\"\r\n          >\r\n            <dt class=\"label-group-title\">{{ type.title }}</dt>\r\n            <dd\r\n              v-for=\"(label, labelIndex) in type.list\"\r\n              :key=\"labelIndex\"\r\n              class=\"label-item\"\r\n              :class=\"{\r\n                'is-active': label.isSelected\r\n              }\"\r\n              @click=\"handleLabelClick(index, label, labelIndex)\"\r\n            >\r\n              {{ label.title }}\r\n            </dd>\r\n          </dl>\r\n        </div>\r\n      </el-scrollbar>\r\n      <template slot=\"footer\">\r\n        <mooc-button type=\"success\" :disabled=\"isLoading\" @click=\"handleFollowClick\">完成</mooc-button>\r\n      </template>\r\n    </mooc-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Pagination from 'components/pagination/pagination.vue'\r\nimport Empty from 'components/empty/empty.vue'\r\nimport { getFollowList, getQuestionList, getLabelList, followLabels } from 'api/question.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      size: 20,\r\n      isLoading: false,\r\n      dialogVisible: false,\r\n      currentIndex: 0,\r\n      followList: [],\r\n      questionList: [],\r\n      total: 0,\r\n      page: 1,\r\n      labelList: [],\r\n      selectLabelList: []\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.userInfo.id) {\r\n      this.getFollowListData(true)\r\n    }\r\n    this.getQuestionListData()\r\n  },\r\n  methods: {\r\n    // 关注标签点击事件\r\n    handleLikeClick (item, index) {\r\n      this.currentIndex = index\r\n      this.getQuestionListData()\r\n    },\r\n    // 标签管理点击事件\r\n    handleLabelManageClick () {\r\n      this.dialogVisible = true\r\n      this.getLabelListData()\r\n    },\r\n    // 标签点击事件\r\n    handleLabelClick (index, label, labelIndex) {\r\n      label.isSelected = !label.isSelected\r\n      this.$set(this.labelList[index]['list'], labelIndex, label)\r\n    },\r\n    // 确认关联标签点击事件\r\n    handleFollowClick () {\r\n      const selectList = []\r\n      this.labelList.forEach(type => {\r\n        const list = type.list\r\n        list.forEach(item => {\r\n          if (item.isSelected) {\r\n            selectList.push(item)\r\n          }\r\n        })\r\n      })\r\n      if (selectList.length === 0) {\r\n        this.$message.warning('至少选择一个要关注的标签')\r\n        return false\r\n      }\r\n      this.isLoading = true\r\n      const params = {\r\n        list: selectList\r\n      }\r\n      followLabels(params).then(res => {\r\n        this.isLoading = false\r\n        const { code, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.$message.success(msg)\r\n          this.dialogVisible = false\r\n          this.getFollowListData()\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.isLoading = false\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 分页值更新\r\n    handlePaginationChange (page) {\r\n      this.page = page\r\n      this.getQuestionListData()\r\n    },\r\n    // 获取关注标签列表\r\n    getFollowListData (isFirst) {\r\n      this.followList = []\r\n      getFollowList().then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          if (data.length === 0 && isFirst) {\r\n            this.handleLabelManageClick()\r\n          } else {\r\n            data.unshift({\r\n              title: '全部'\r\n            })\r\n            this.followList = data\r\n          }\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取猿问数据\r\n    getQuestionListData () {\r\n      const params = {\r\n        page: this.page,\r\n        size: this.size,\r\n        label: this.currentLabel === '全部' ? '' : this.currentLabel\r\n      }\r\n      this.questionList = []\r\n      getQuestionList(params).then(res => {\r\n        let { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.questionList = data.list\r\n          this.total = data.total\r\n        } else {\r\n          this.total = 0\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.total = 0\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 获取标签列表\r\n    getLabelListData () {\r\n      this.labelList = []\r\n      getLabelList().then(res => {\r\n        const { code, data, msg } = res\r\n        if (code === ERR_OK) {\r\n          this.labelList = this.normalizeLabelList(data)\r\n        } else {\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('接口异常')\r\n      })\r\n    },\r\n    // 处理标签数据\r\n    normalizeLabelList (array) {\r\n      if (array.length === 0) {\r\n        return []\r\n      }\r\n      const labelTreeObj = []\r\n      array.forEach(item => {\r\n        const findIndex = labelTreeObj.findIndex(filter => filter.title === item.type.text)\r\n        // 判断当前标签是否在已关注列表中\r\n        const selectIndex = this.followList.findIndex(filterItem => filterItem.labelid === item.id)\r\n        if (selectIndex === -1) {\r\n          item.isSelected = false\r\n        } else {\r\n          item.isSelected = true\r\n        }\r\n        if (findIndex === -1) {\r\n          labelTreeObj.push({\r\n            title: item.type.text,\r\n            list: [item]\r\n          })\r\n        } else {\r\n          labelTreeObj[findIndex].list.push(item)\r\n        }\r\n      })\r\n      return labelTreeObj\r\n    }\r\n  },\r\n  computed: {\r\n    currentLabel () {\r\n      if (this.followList.length === 0) {\r\n        return ''\r\n      }\r\n      return this.followList[this.currentIndex].title\r\n    },\r\n    ...mapGetters(['userInfo'])\r\n  },\r\n  components: {\r\n    Pagination,\r\n    Empty\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl';\r\n  .question\r\n    padding: 20px 0 50px;\r\n    .question-header\r\n      .question-search\r\n        position: relative;\r\n        padding-right: 75px;\r\n        background-color: #fff;\r\n        border-bottom: 1px solid rgba(7,17,27,0.1);\r\n        & > img\r\n          width: 300px;\r\n          height: 60px;\r\n        .search-box\r\n          float: right;\r\n          position: relative;\r\n          margin-top: 16px;\r\n          width: 480px;\r\n          height: 36px;\r\n          line-height: 36px;\r\n          border-radius: 8px;\r\n          background-color: $border-three-color;\r\n          & > input\r\n            padding: 0 60px 0 10px;\r\n            width: 100%;\r\n            height: 36px;\r\n            outline: none;\r\n            background: none;\r\n            box-sizing: border-box;\r\n            color: $font-four-color;\r\n            font-size: 14px;\r\n          .iconfont\r\n            display: inline-block;\r\n            position: absolute;\r\n            top: 0;\r\n            right: 20px;\r\n            font-size: 20px;\r\n            font-weight: 700;\r\n            color: $font-four-color;\r\n            cursor: pointer;\r\n        .search-btn\r\n          position: absolute;\r\n          right: 0;\r\n          top: 16px;\r\n          padding: 7px 16px;\r\n          background-color: #1fad4e;\r\n          border-radius: 18px;\r\n          color: #fff;\r\n          font-size: 14px;\r\n          line-height: 24px;\r\n          cursor: pointer;\r\n          &:hover\r\n            background-color: #17823b;\r\n      .question-nav\r\n        position: relative;\r\n        padding: 18px 0;\r\n        border-bottom: 1px solid rgba(7,17,27,0.1);\r\n        dt, dd\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 20px;\r\n          font-size: 14px;\r\n          line-height: 24px;\r\n        dd\r\n          cursor: pointer;\r\n          &:last-child\r\n            float: right;\r\n            margin-right: 0;\r\n          &:hover, &.active\r\n            color: $theme-green-color;\r\n    .question-content-container\r\n      margin-top: 30px;\r\n      .question-list\r\n        padding: 28px 32px;\r\n        background-color: #fff;\r\n        border-radius: 12px;\r\n        box-shadow: 0 4px 8px 2px rgba(7,17,27,.1)\r\n        .question-item\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 16px 0;\r\n          border-bottom: 1px solid rgba(7,17,27,0.1);\r\n          &:last-child\r\n            border-bottom: none;\r\n          .finish\r\n            flex: 0 0 40px;\r\n            width: 40px;\r\n            padding: 8px 0;\r\n            margin-right: 15px;\r\n            background-color: rgba(31,173,78,.1);\r\n            color: #17823b;\r\n            & > span\r\n              display: block;\r\n              text-align: center;\r\n              line-height: 18px;\r\n              font-size: 16px;\r\n              font-weight: 700;\r\n              &:last-child\r\n                font-weight: 400;\r\n                font-size: 14px;\r\n          .content-box\r\n            flex: 1;\r\n            .title\r\n              margin-bottom: 4px;\r\n              font-size: 16px;\r\n              color: $font-first-color;\r\n              font-weight: 700;\r\n              line-height: 24px;\r\n              cursor: pointer;\r\n              &:hover\r\n                color: #1fad4e;\r\n            .tag\r\n              font-size: 12px;\r\n              color: $font-four-color;\r\n              & > img\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                margin-top: -2px;\r\n                width: 16px;\r\n                height: 16px;\r\n                border-radius: 50%;\r\n              & > span\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                &.name\r\n                  padding: 0 10px 0 5px;\r\n                &.view-box\r\n                  padding-left: 10px;\r\n                  & > i, & > span\r\n                    display: inline-block;\r\n                    vertical-align: middle;\r\n      .list-empty\r\n        padding: 10px 0;\r\n        text-align: center;\r\n        font-size: 14px;\r\n        color: $theme-red-color;\r\n     .label-container\r\n        padding-left: 20px;\r\n       .label-group\r\n        display: inline-block;\r\n        vertical-align: top;\r\n        margin-bottom: 18px;\r\n        width: 250px;\r\n        &:nth-child(2n + 1)\r\n          margin-right: 20px;\r\n        .label-group-title\r\n          margin-bottom: 18px;\r\n          font-size: 14px;\r\n          color: $theme-green-color;\r\n          font-weight: bold;\r\n        .label-item\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 8px;\r\n          margin-bottom: 8px;\r\n          padding: 8px 16px;\r\n          border-radius: 16px;\r\n          background-color: rgba(28,31,33,.08);\r\n          line-height: 16px;\r\n          cursor: pointer;\r\n          transition: all 0.3s;\r\n          &:hover, &.is-active\r\n            color: #fff;\r\n            background-color: $theme-green-color;\r\n    >>> .mooc-dialog\r\n      .mooc-dialog-body\r\n        padding-top: 20px;\r\n      .mooc-dialog-footer\r\n        text-align: center;\r\n        .mooc-button\r\n          width: 200px;\r\n          border-radius: 24px;\r\n      .el-scrollbar\r\n        height: 360px;\r\n</style>"]}]}