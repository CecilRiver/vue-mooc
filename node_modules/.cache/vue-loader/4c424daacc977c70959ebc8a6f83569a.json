{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\base\\carousel\\carousel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\base\\carousel\\carousel.vue","mtime":1698894932446},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\babel-loader\\lib\\index.js","mtime":1698895100317},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { throttle } from 'utils/utils.js'\r\nconst hover_throttle_interval = 300\r\nconst click_throttle_interval = 200\r\nexport default {\r\n  name: 'MoocCarousel',\r\n  props: {\r\n    initialIndex: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 300\r\n    },\r\n    autoplay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 3000,\r\n      validator (val) {\r\n        return val > 0\r\n      }\r\n    },\r\n    loop: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    trigger: {\r\n      type: String,\r\n      default: 'hover',\r\n      validator (val) {\r\n        return ['hover', 'click'].includes(val)\r\n      }\r\n    },\r\n    arrow: {\r\n      type: String,\r\n      default: 'hover',\r\n      validator (val) {\r\n        return ['always', 'hover', 'never'].includes(val)\r\n      }\r\n    },\r\n    showIndicator: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      items: [],\r\n      hover: false,\r\n      activeIndex: -1\r\n    }\r\n  },\r\n  created () {\r\n    // indicator hover throttle\r\n    this.throttleIndicatorHover = throttle((index) => {\r\n      this.handleIndicatorHover(index)\r\n    }, hover_throttle_interval)\r\n\r\n    // arrow click throttle\r\n    this.throttleArrowClick = throttle((index) => {\r\n      this.setActiveItem(index)\r\n    }, click_throttle_interval)\r\n  },\r\n  mounted () {\r\n    this.updateItems()\r\n    this.$nextTick(() => {\r\n      if (this.initialIndex < this.items.length && this.initialIndex >= 0) {\r\n        this.activeIndex = this.initialIndex\r\n      }\r\n      this.startTimer()\r\n    })\r\n  },\r\n  methods: {\r\n    handleMouseEnter () {\r\n      this.clearTimer()\r\n      this.hover = true\r\n    },\r\n    handleMouseLeave () {\r\n      this.startTimer()\r\n      this.hover = false\r\n    },\r\n    handleIndicatorClick (index) {\r\n      this.activeIndex = index\r\n    },\r\n    handleIndicatorHover (index) {\r\n      if (this.trigger === 'hover' && index !== this.activeIndex) {\r\n        this.activeIndex = index\r\n      }\r\n    },\r\n    updateItems () {\r\n      this.items = this.$children.filter(child => child.$options.name === 'MoocCarouselItem')\r\n    },\r\n    startTimer () {\r\n      if (!this.autoplay) {\r\n        return\r\n      }\r\n      this.clearTimer()\r\n      this.timer = setInterval(this.playItem, this.interval)\r\n    },\r\n    clearTimer () {\r\n      if (this.timer) {\r\n        clearInterval(this.timer)\r\n        this.timer = null\r\n      }\r\n    },\r\n    playItem () {\r\n      if (this.activeIndex < this.items.length - 1) {\r\n        this.activeIndex ++\r\n      } else if (this.loop) {\r\n        this.activeIndex = 0\r\n      }\r\n    },\r\n    resetItemPosition (oldIndex) {\r\n      this.items.forEach((item, index) => {\r\n        item.translateItem(index, this.activeIndex, oldIndex)\r\n      })\r\n    },\r\n    setActiveItem (index) {\r\n      let len = this.items.length\r\n      let oldIndex = this.activeIndex\r\n      if (index < 0) {\r\n        this.activeIndex = this.loop ? len - 1 : 0\r\n      } else if (index >= len) {\r\n        this.activeIndex = this.loop ? 0 : len - 1\r\n      } else {\r\n        this.activeIndex = index\r\n      }\r\n      if (oldIndex === this.activeIndex) {\r\n        this.resetItemPosition(this.activeIndex)\r\n      }\r\n    },\r\n    // outside method\r\n    prev () {\r\n      this.setActiveItem(this.activeIndex - 1)\r\n    },\r\n    // outside method\r\n    next () {\r\n      this.activeIndex (this.activeIndex + 1)\r\n    }\r\n  },\r\n  watch: {\r\n    activeIndex (newVal, oldVal) {\r\n      this.resetItemPosition(oldVal)\r\n      if (oldVal > -1) {\r\n        this.$emit('change', newVal, oldVal)\r\n      }\r\n    },\r\n    items (val) {\r\n      if (val.length > 0) {\r\n        this.setActiveItem(this.initialIndex)\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    this.clearTimer()\r\n  }\r\n}\r\n",{"version":3,"sources":["carousel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"carousel.vue","sourceRoot":"src/base/carousel","sourcesContent":["<template>\r\n  <div\r\n    class=\"mooc-carousel\"\r\n    @mouseenter.stop=\"handleMouseEnter\"\r\n    @mouseleave.stop=\"handleMouseLeave\"\r\n  >\r\n    <div\r\n      class=\"mooc-carousel-container\"\r\n      :style=\"{\r\n        height: `${height}px`\r\n      }\"\r\n    >\r\n      <template v-if=\"arrow != 'never'\">\r\n        <transition\r\n          name=\"arrow-left\"\r\n        >\r\n          <i\r\n            v-show=\"(arrow == 'always' || hover) && (loop || activeIndex > 0)\"\r\n            class=\"mooc-carousel-arrow mooc-carousel-arrow-left iconfont\"\r\n            @click.stop=\"throttleArrowClick(activeIndex - 1)\"\r\n          >\r\n            &#xe63d;\r\n          </i>\r\n        </transition>\r\n        <transition\r\n          name=\"arrow-right\"\r\n        >\r\n          <i\r\n            v-show=\"(arrow == 'always' || hover) && (loop || activeIndex < items.length - 1)\"\r\n            class=\"mooc-carousel-arrow mooc-carousel-arrow-right iconfont\"\r\n            @click.stop=\"throttleArrowClick(activeIndex + 1)\"\r\n          >\r\n            &#xe627;\r\n          </i>\r\n        </transition>\r\n      </template>\r\n      <slot></slot>\r\n    </div>\r\n    <ul\r\n      v-if=\"showIndicator\"\r\n      class=\"mooc-carousel-indicators\"\r\n    >\r\n      <li\r\n        v-for=\"(item, index) in items\"\r\n        :key=\"index\"\r\n        :class=\"[\r\n          'mooc-carousel-indicator',\r\n          (index === activeIndex) && 'is-active'\r\n        ]\"\r\n        @mouseenter=\"throttleIndicatorHover(index)\"\r\n        @click.stop=\"handleIndicatorClick(index)\"\r\n      >\r\n        <span class=\"mooc-carousel-indicator-dot\"></span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { throttle } from 'utils/utils.js'\r\nconst hover_throttle_interval = 300\r\nconst click_throttle_interval = 200\r\nexport default {\r\n  name: 'MoocCarousel',\r\n  props: {\r\n    initialIndex: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 300\r\n    },\r\n    autoplay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 3000,\r\n      validator (val) {\r\n        return val > 0\r\n      }\r\n    },\r\n    loop: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    trigger: {\r\n      type: String,\r\n      default: 'hover',\r\n      validator (val) {\r\n        return ['hover', 'click'].includes(val)\r\n      }\r\n    },\r\n    arrow: {\r\n      type: String,\r\n      default: 'hover',\r\n      validator (val) {\r\n        return ['always', 'hover', 'never'].includes(val)\r\n      }\r\n    },\r\n    showIndicator: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      items: [],\r\n      hover: false,\r\n      activeIndex: -1\r\n    }\r\n  },\r\n  created () {\r\n    // indicator hover throttle\r\n    this.throttleIndicatorHover = throttle((index) => {\r\n      this.handleIndicatorHover(index)\r\n    }, hover_throttle_interval)\r\n\r\n    // arrow click throttle\r\n    this.throttleArrowClick = throttle((index) => {\r\n      this.setActiveItem(index)\r\n    }, click_throttle_interval)\r\n  },\r\n  mounted () {\r\n    this.updateItems()\r\n    this.$nextTick(() => {\r\n      if (this.initialIndex < this.items.length && this.initialIndex >= 0) {\r\n        this.activeIndex = this.initialIndex\r\n      }\r\n      this.startTimer()\r\n    })\r\n  },\r\n  methods: {\r\n    handleMouseEnter () {\r\n      this.clearTimer()\r\n      this.hover = true\r\n    },\r\n    handleMouseLeave () {\r\n      this.startTimer()\r\n      this.hover = false\r\n    },\r\n    handleIndicatorClick (index) {\r\n      this.activeIndex = index\r\n    },\r\n    handleIndicatorHover (index) {\r\n      if (this.trigger === 'hover' && index !== this.activeIndex) {\r\n        this.activeIndex = index\r\n      }\r\n    },\r\n    updateItems () {\r\n      this.items = this.$children.filter(child => child.$options.name === 'MoocCarouselItem')\r\n    },\r\n    startTimer () {\r\n      if (!this.autoplay) {\r\n        return\r\n      }\r\n      this.clearTimer()\r\n      this.timer = setInterval(this.playItem, this.interval)\r\n    },\r\n    clearTimer () {\r\n      if (this.timer) {\r\n        clearInterval(this.timer)\r\n        this.timer = null\r\n      }\r\n    },\r\n    playItem () {\r\n      if (this.activeIndex < this.items.length - 1) {\r\n        this.activeIndex ++\r\n      } else if (this.loop) {\r\n        this.activeIndex = 0\r\n      }\r\n    },\r\n    resetItemPosition (oldIndex) {\r\n      this.items.forEach((item, index) => {\r\n        item.translateItem(index, this.activeIndex, oldIndex)\r\n      })\r\n    },\r\n    setActiveItem (index) {\r\n      let len = this.items.length\r\n      let oldIndex = this.activeIndex\r\n      if (index < 0) {\r\n        this.activeIndex = this.loop ? len - 1 : 0\r\n      } else if (index >= len) {\r\n        this.activeIndex = this.loop ? 0 : len - 1\r\n      } else {\r\n        this.activeIndex = index\r\n      }\r\n      if (oldIndex === this.activeIndex) {\r\n        this.resetItemPosition(this.activeIndex)\r\n      }\r\n    },\r\n    // outside method\r\n    prev () {\r\n      this.setActiveItem(this.activeIndex - 1)\r\n    },\r\n    // outside method\r\n    next () {\r\n      this.activeIndex (this.activeIndex + 1)\r\n    }\r\n  },\r\n  watch: {\r\n    activeIndex (newVal, oldVal) {\r\n      this.resetItemPosition(oldVal)\r\n      if (oldVal > -1) {\r\n        this.$emit('change', newVal, oldVal)\r\n      }\r\n    },\r\n    items (val) {\r\n      if (val.length > 0) {\r\n        this.setActiveItem(this.initialIndex)\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    this.clearTimer()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/theme/variables.styl';\r\n  @import '~assets/theme/src/carousel-variables.styl';\r\n  @import '~assets/stylus/mixin.styl';\r\n  .mooc-carousel\r\n    position: relative;\r\n    .mooc-carousel-container\r\n      position: relative;\r\n      overflow-x: hidden;\r\n      .mooc-carousel-arrow\r\n        z-index: $carousel-arrow-zIndex;\r\n        display: inline-block;\r\n        position: absolute;\r\n        top: 50%;\r\n        width: $carousel-arrow-size;\r\n        height: $carousel-arrow-size;\r\n        line-height: $carousel-arrow-size;\r\n        transform: translateY(-50%);\r\n        background-color: $carousel-arrow-background-color;\r\n        border-radius: $base-border-radius-circle;\r\n        transition: all $carousel-arrow-animation-duration;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        color: #fff;\r\n        font-size: $carousel-font-size;\r\n        &.mooc-carousel-arrow-left\r\n          left: $carousel-arrow-left;\r\n          &.arrow-left-enter, &.arrow-left-leave-active\r\n            transform: translate(- $carousel-arrow-left, -50%);\r\n            opacity: 0;\r\n        &.mooc-carousel-arrow-right\r\n          right: $carousel-arrow-right;\r\n          &.arrow-right-enter, &.arrow-right-leave-active\r\n            transform: translate($carousel-arrow-left, -50%);\r\n            opacity: 0;\r\n        &:hover\r\n          background-color: $carousel-arrow-hover-background-color\r\n    .mooc-carousel-indicators\r\n      z-index: $carousel-item-normal-zIndex + 1;\r\n      position: absolute;\r\n      bottom: $carousel-indicators-bottom;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      margin: 0;\r\n      padding: 0;\r\n      list-style: none;\r\n      .mooc-carousel-indicator\r\n        display: inline-block;\r\n        &.is-active\r\n          .mooc-carousel-indicator-dot\r\n            width: $carousel-indicator-active-width;\r\n            border-radius: $carousel-indicator-active-radius;\r\n        .mooc-carousel-indicator-dot\r\n          display: inline-block;\r\n          margin: 0 $carousel-indicator-margin;\r\n          width: $carousel-indicator-size;\r\n          height: $carousel-indicator-size;\r\n          border-radius: $base-border-radius-circle;\r\n          background-color: $carousel-indicator-background-color;\r\n          transition: all $carousel-item-animation-duration ease-in-out;\r\n          cursor: pointer;\r\n          extend-click($carousel-indicator-extend-size, relative);\r\n</style>"]}]}