{"remainingRequest":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitTest\\vue-mooc\\src\\pages\\course\\index.vue?vue&type=style&index=0&id=48145d62&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\GitTest\\vue-mooc\\src\\pages\\course\\index.vue","mtime":1699521339118},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\css-loader\\index.js","mtime":1698895097390},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698895084165},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\postcss-loader\\src\\index.js","mtime":1698895087734},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\stylus-loader\\index.js","mtime":1698895086074},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698895099045},{"path":"C:\\GitTest\\vue-mooc\\node_modules\\vue-loader\\lib\\index.js","mtime":1698895084158}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~assets/stylus/variables.styl';\n.course\n  padding-top: 20px;\n  .course-search\n    padding: 12px 0;\n    border-bottom: 1px solid $border-second-color;\n    .search-tag\n      display: inline-block;\n      & > img:nth-child(2)\n        margin-left: 16px;\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/course","sourcesContent":["<template>\r\n  <div class=\"course mx-center\">\r\n    <!-- 搜索模块 -->\r\n    <div class=\"course-search\">\r\n      <div class=\"search-tag\">\r\n        <img src=\"https://www.imooc.com/static/img/course/logo-course2.png\" width=\"96\" height=\"60\" alt=\"\">\r\n        <!-- <img src=\"https://www.imooc.com/static/img/course/course-top.png\" width=\"96\" height=\"60\" alt=\"\"> -->\r\n      </div>\r\n      <!-- 使用子组件并监听子组件的自定义事件 -->\r\n      <course-search @searchEvent=\"getChangeCourse\"></course-search>\r\n    </div>\r\n\r\n    <!-- 导航模块 -->\r\n    <course-nav v-if=\"navList.length\" :list=\"navList\" :params.sync=\"params\" />\r\n    \r\n    <!-- 课程列表 -->\r\n    <course-list :list=\"courseList\" :sort.sync=\"sort\" />\r\n\r\n    <!-- 分页 -->\r\n    <pagination :total=\"total\" :page.sync=\"page\" :size=\"size\" @change=\"handlePaginationChange\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'utils/axios.js'\r\n// 设置axios的baseURL\r\naxios.defaults.baseURL = 'http://127.0.0.1:7000/';\r\naxios.defaults.withCredentials = false;// Cookie跨域\r\nimport CourseSearch from './search.vue'\r\nimport CourseNav from './nav.vue'\r\nimport CourseList from './list.vue'\r\nimport Pagination from 'components/pagination/pagination.vue'\r\nimport { getLessonNav, getLessonList, getLessionLimit } from 'api/lesson.js'\r\nimport getUserName from 'api/user.js'\r\nimport { ERR_OK } from 'api/config.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      sort: '',\r\n      params: {},\r\n      navList: [],\r\n      courseList: [],\r\n      page: 1,\r\n      size: 15,\r\n      total: 0,\r\n    }\r\n  },\r\n\r\n     mounted() {\r\n  // 先执行获取导航和课程数据\r\n   this.getCourseNavList();\r\n   this.getCourseListData();\r\n\r\n},\r\n  methods: {\r\n\r\n    //处理子组件搜索事件的方法\r\n    // handleSearch(keyword){\r\n    //   console.log(\"父组件中获取的搜索关键字：\",keyword);\r\n    // },\r\n  \r\n\r\n\r\n\r\n\r\n     processCourseList() {\r\n\r\n    // 遍历courseList数组进行处理\r\n    for (let i = 0; i < this.courseList.length; i++) {\r\n\r\n\r\n        this.getLessionType(this.courseList[i].categoryId)\r\n        .then(response => {\r\n         const categoryName = response;\r\n        // 将item.categoryId替换为categoryName\r\n        this.courseList[i].categoryId = categoryName;\r\n       })\r\n        .catch(error => {\r\n    console.error(\"请求失败或出现错误:\", error);\r\n     \r\n  });\r\n\r\n\r\n    }\r\n    console.log(\"courseList:\", this.courseList.length);\r\n    console.log(this.courseList);\r\n  },\r\n    \r\n\r\n    // 导航值更新事件\r\n    handleNavChange (params) {\r\n      this.params = params\r\n      this.getChangeCourse()\r\n    },\r\n    // 分页值更新\r\n    handlePaginationChange (page) {\r\n      this.page = page\r\n      this.getChangeCourse()\r\n    },\r\n    // 收藏or取消收藏点击事件\r\n    handleCollectClick (item, index) {\r\n      this.courseList[index].isLike = !this.courseList[index].isLike\r\n    },\r\n    // 获取课程导航信息\r\n    getCourseNavList () {\r\n      getLessonNav().then(res => {\r\n        console.log(res);   \r\n        let { msg, code, page } = res\r\n        if (code === 0) {\r\n          this.navList = page.list\r\n        } else {\r\n          this.navList = []\r\n          this.$message.error('获取课程分类数据失败')\r\n        }\r\n      }).catch(() => {\r\n        this.navList = []\r\n        this.$message.error('接口异常1')\r\n      })\r\n    },\r\n            // 获取课程种类接口\r\n        getCourseTypeData () {\r\n\r\n      getLessonList(item.categoryId).then(res => {\r\n        console.log(res);   \r\n        let { msg, code, categories} = res\r\n        if(code === 0) {\r\n          this.type = categories\r\n        } else {\r\n          this.type = []\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.typet = []\r\n        this.$message.error('接口异常2')\r\n      })\r\n    },\r\n\r\n\r\n    getChangeCourse(keyword){\r\n      const params = {\r\n        categoryId:this.params.category,\r\n        courseLevel:this.params.diff,\r\n        creationDate: this.sort,\r\n        courseName:keyword\r\n      }\r\n      console.log(params)\r\n      getLessionLimit(params).then(res => {\r\n        let {msg,code,page} = res\r\n        if(code === 0){\r\n          this.courseList = page.list\r\n          this.total = page.totalCount\r\n          this.page = page.totalPage\r\n          this.size = page.pageSize\r\n           // 在这里继续处理courseList\r\n        //  this.processCourseList();\r\n        }\r\n      }).catch(() => {\r\n        this.courseList = []\r\n        this.total = 0\r\n        this.$message.error('接口异常la')\r\n      })\r\n\r\n    },\r\n\r\n    // 获取课程信息接口\r\n    getCourseListData () {\r\n      const params = {\r\n        // page: this.page,\r\n        // size: this.size,\r\n        // type: 0,\r\n        // category: this.params.direction,\r\n        // label: this.params.category,\r\n        // diff: this.params.diff,\r\n        // sort: this.sort\r\n      }\r\n      getLessonList(null).then(res => {  \r\n        let { msg, code, page } = res\r\n        if(code === 0) {\r\n          this.courseList = page.list\r\n          this.total = page.totalCount\r\n          this.page = page.totalPage\r\n          this.size = page.pageSize\r\n           // 在这里继续处理courseList\r\n         // this.processCourseList();\r\n        } else {\r\n          this.courseList = []\r\n          this.total = 0\r\n          this.$message.error(msg)\r\n        }\r\n      }).catch(() => {\r\n        this.courseList = []\r\n        this.total = 0\r\n        this.$message.error('接口异常2')\r\n      })\r\n    },\r\n    \r\n    getLessionType(categoryId) {\r\n      //axios.get(`/course/categories/info/${params.id}`);\r\n    // 发送请求，获取类型数据\r\n    \r\n    return axios.get(`/course/categories/info/${categoryId}`)\r\n      .then(response => {\r\n        const data = response;\r\n        if (data.code === 0) {\r\n          return data.categories.categoryName;\r\n         \r\n        } else {\r\n          throw new Error(data.msg);\r\n        }\r\n      });\r\n  }\r\n  },\r\n  watch: {\r\n    params () {\r\n      this.page = 1\r\n      this.getChangeCourse()\r\n    },\r\n    sort () {\r\n      this.getChangeCourse()\r\n    }\r\n  },\r\n  components: {\r\n    CourseSearch,\r\n    CourseNav,\r\n    CourseList,\r\n    Pagination\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl';\r\n  .course\r\n    padding-top: 20px;\r\n    .course-search\r\n      padding: 12px 0;\r\n      border-bottom: 1px solid $border-second-color;\r\n      .search-tag\r\n        display: inline-block;\r\n        & > img:nth-child(2)\r\n          margin-left: 16px;\r\n</style>\r\n"]}]}